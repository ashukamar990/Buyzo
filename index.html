<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Buyzocart Shop - Best Deals & Products</title>
  <meta name="description" content="Buyzocart Shop - Best online shopping deals, secure checkout, and superfast delivery."/>
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://buyzocartshop.com/">
  <meta property="og:image" content="https://buyzocartshop.com/logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://images.unsplash.com"/>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <style>
    /* All CSS styles from the original file remain exactly the same */
    /* ... (entire CSS content from original file) ... */
  </style>

</head>
<body>
  <!-- Mobile Menu Overlay -->
  <div class="menu-overlay" id="menuOverlay"></div>
  
  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="menu-header">
      <div class="brand">
        <span class="chip">BUYZO</span>
        <span>Cart</span>
      </div>
      <div class="menu-close" id="menuClose">√ó</div>
    </div>
    <div class="menu-items">
      <div class="menu-item" onclick="showPage('homePage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        Home
      </div>
      <div class="menu-item" onclick="showPage('productsPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        Products
      </div>
      <div class="menu-item" onclick="checkAuthAndShowPage('myOrdersPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        My Orders
      </div>
      <div class="menu-item" onclick="checkAuthAndShowPage('wishlistPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
        Wishlist
      </div>
      <div class="menu-item" onclick="showPage('cancellationPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="15" y1="9" x2="9" y2="15"></line>
          <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>
        Refund & Cancellation
      </div>
      <div class="menu-item" onclick="showPage('termsPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        Terms & Conditions
      </div>
      <div class="menu-item" onclick="showPage('shippingPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 15a5 5 0 0 1 5-5h8a5 5 0 0 1 5 5v0a5 5 0 0 1-5 5H8a5 5 0 0 1-5-5v0z"></path>
          <path d="M3 15V9a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v6"></path>
          <path d="M9 19h6"></path>
        </svg>
        Shipping Policy
      </div>
      <div class="menu-item" onclick="showPage('privacyPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
        </svg>
        Privacy Policy
      </div>
      <div class="menu-item" onclick="showPage('contactPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
          <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
        Contact Us
      </div>
      
      <!-- Additional Menu Items -->
      <div class="menu-item" onclick="showPage('aboutPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
        About Us
      </div>
      
      <!-- Social Media Links in Mobile Menu - Icons Only -->
      <div style="display: flex; justify-content: center; gap: 10px; padding: 15px 20px; border-top: 1px solid var(--border);">
        <div class="social-menu-item" onclick="window.open('https://www.instagram.com/buyzo.cart?igsh=d2Mxc2EwMW45cWwy', '_blank'); closeMenu();">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#E4405F">
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
          </svg>
        </div>
        <div class="social-menu-item" onclick="window.open('https://www.youtube.com/@BuyzoCart', '_blank'); closeMenu();">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#FF0000">
            <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
          </svg>
        </div>
        <div class="social-menu-item" onclick="window.open('https://t.me/buyzocartshop', '_blank'); closeMenu();">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#26A5E4">
            <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.447 1.394c-.14.141-.259.259-.374.261l.213-3.053 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.136-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/>
          </svg>
        </div>
        <div class="social-menu-item" onclick="window.open('https://www.facebook.com/share/17G9Bu9fmH/', '_blank'); closeMenu();">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#1877F2">
            <path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"/>
          </svg>
        </div>
      </div>
      
      <!-- Login/Signup at the bottom of mobile menu -->
      <div class="menu-item" id="mobileLoginBtn" onclick="showLoginModal(); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        Login / Sign Up
      </div>
      <div class="menu-item" id="mobileUserProfile" style="display:none;" onclick="showPage('accountPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span id="mobileUserName">My Account</span>
      </div>
    </div>
  </div>

  <header>
    <div class="header-inner">
      <div class="menu-icon" id="menuIcon">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <div class="brand" aria-label="Buyzo Cart brand" onclick="showPage('homePage')">
        <span class="chip">BUYZO</span>
        <span>Cart</span>
      </div>
      <div class="cta">
        <!-- Theme Toggle Button -->
        <button class="theme-toggle" id="themeToggle" title="Toggle Light/Dark Mode">
          <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>
        
        <button class="btn secondary" id="openContactTop" title="Contact">Contact</button>
        <button class="btn secondary" id="openMyOrdersTop" title="My Orders">My Orders
          <span id="ordersNotification" class="notification-badge" style="display:none"></span>
        </button>
        <!-- Login/Signup buttons -->
        <button class="btn secondary" id="openLoginTop" title="Login">Login</button>
        <div class="user-profile" id="userProfile" style="display:none;">
          <div class="user-avatar" id="userAvatar">U</div>
          <div class="user-name" id="userName">User</div>
          <div class="account-dropdown" id="accountDropdown">
            <div class="account-dropdown-item" id="accountEmail">user@example.com</div>
            <div class="account-dropdown-item" onclick="showPage('accountPage')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
              My Account
            </div>
            <div class="account-dropdown-item" onclick="showPage('myOrdersPage')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
              </svg>
              My Orders
            </div>
            <div class="account-dropdown-item" onclick="showPage('wishlistPage')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
              Wishlist
            </div>
            <div class="account-dropdown-item" onclick="logout()">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              Logout
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Home Page -->
    <section class="page active" id="homePage">
      
      <section class="hero">
        <h1>Welcome to <span style="color:var(--accent)">Buyzo Cart</span></h1>
        <p>Clean, fast checkout. Hand‚Äëpicked products. Fully responsive UI.</p>

        <!-- Rotating subtle messages -->
        <div class="hero-messages" id="heroMessages">
          <span class="active">üî• Big Sale Today</span>
          <span>üöö Free Shipping over ‚Çπ999</span>
          <span>‚ú® New Arrivals Just Dropped</span>
        </div>

        <!-- Highlight CTA strip -->
        <div class="highlight-strip" onclick="showPage('productsPage')">
          Limited Time Offer: Flat 40% OFF on all Fashion Items ‚Äî <u>Shop Now ‚Üí</u>
        </div>
      </section>

      <!-- NEW: Banner Carousel -->
      <div class="banner-carousel" id="bannerCarousel">
        <div class="banner-track" id="bannerTrack"></div>
        <div class="banner-controls" id="bannerControls"></div>
      </div>

      <!-- TRENDING NOW SECTION -->
      <div class="trending-section">
        <div class="trending-header">
          <h2 class="trending-title">Trending Now</h2>
        </div>
        <div class="slider-container">
          <div class="slider-track" id="productSlider"></div>
        </div>
      </div>

      <!-- NEW: Category Circles Section -->
      <div class="category-circles">
        <h2 class="category-circles-title">Shop by Category</h2>
        <div class="category-circles-container" id="categoryCirclesContainer"></div>
      </div>

      <!-- SEARCH BAR -->
      <div class="search-wrap">
        <input id="homeSearchInput" placeholder="Search products (e.g. 'Sneakers', 'T-shirt', 'Earbuds')" />
      </div>

      <!-- Search Results Grid -->
      <div id="homeSearchResults" style="display:none;"></div>

      <div class="steps center">
        <div class="step-pill" id="pill-products">1 ‚Ä¢ Products</div>
        <div class="step-pill disabled" id="pill-order">2 ‚Ä¢ Order Details</div>
        <div class="step-pill disabled" id="pill-user">3 ‚Ä¢ Your Info</div>
        <div class="step-pill disabled" id="pill-pay">4 ‚Ä¢ Payment</div>
      </div>

      <div class="card-panel" style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
        <h2 style="margin:0">Featured Products</h2>
      </div>

      <!-- Featured Products Grid -->
      <div class="product-grid" id="homeProductGrid">
        <!-- Product cards will be loaded here -->
      </div>

      <!-- Recently Viewed Products Section -->
      <div class="recently-viewed" id="recentlyViewedSection" style="display:none;">
        <h2 class="recently-viewed-title">Recently Viewed</h2>
        <div class="slider-container">
          <div class="slider-track" id="recentlyViewedSlider"></div>
        </div>
      </div>

      <!-- Newsletter Subscription Section -->
      <div class="newsletter-section">
        <h2 class="newsletter-title">Stay Updated</h2>
        <p class="newsletter-desc">Subscribe to our newsletter for exclusive deals, new arrivals, and special offers delivered to your inbox.</p>
        <div class="newsletter-form">
          <input type="email" class="newsletter-input" placeholder="Enter your email" id="newsletterEmail" />
          <button class="newsletter-btn" id="subscribeBtn">Subscribe</button>
        </div>
      </div>
    </section>

    <!-- Products Page -->
    <section class="page" id="productsPage">
      <div class="card-panel" style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
        <h2 style="margin:0">All Products</h2>
      </div>

      <!-- Price Filter - Simplified -->
      <div class="price-filter">
        <div class="price-filter-title">Filter by Price</div>
        <div class="price-range-slider">
          <input type="range" min="0" max="5000" value="0" class="price-slider" id="minPriceSlider">
          <input type="range" min="0" max="5000" value="5000" class="price-slider" id="maxPriceSlider">
          <div class="price-range-values">
            <span id="minPriceValue">‚Çπ0</span>
            <span id="maxPriceValue">‚Çπ5000</span>
          </div>
        </div>
        <div class="price-range" style="margin-top: 12px;">
          <input type="number" class="price-input" id="minPrice" placeholder="Min" min="0" />
          <span>to</span>
          <input type="number" class="price-input" id="maxPrice" placeholder="Max" min="0" />
          <button class="btn secondary" id="applyPriceFilter">Apply</button>
          <button class="btn secondary" id="resetPriceFilter">Reset</button>
        </div>
      </div>

      <!-- Search bar -->
      <div class="search-wrap">
        <input id="searchInput" placeholder="Search products (e.g. 'Sneakers', 'T-shirt', 'Earbuds')" />
      </div>

      <!-- Category Navigation -->
      <div class="categories" id="categoriesContainer">
        <!-- Categories will be loaded from Firebase by admin -->
      </div>

      <div class="product-grid" id="productGrid">
        <!-- Product cards will be loaded here -->
      </div>
    </section>

    <!-- Product Detail Page -->
    <section class="page" id="productDetailPage">
      <div class="product-detail-page">
        <!-- Breadcrumb Navigation -->
        <div class="breadcrumb">
          <a href="#" onclick="showPage('homePage')">Home</a>
          <span>></span>
          <a href="#" onclick="showPage('productsPage')">Products</a>
          <span>></span>
          <span id="breadcrumbProductName">Product Details</span>
        </div>
        
        <div class="back-to-products" onclick="showPage('productsPage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Products
        </div>
        
        <div class="product-detail-container">
          <div class="product-detail-gallery">
            <!-- Amazon/Flipkart Style Gallery -->
            <div class="fk-gallery-container">
              <div class="fk-gallery-main" id="fkGalleryMain">
                <div class="fk-gallery-track" id="fkGalleryTrack"></div>
                <div class="fk-gallery-controls">
                  <button class="fk-gallery-btn fk-prev-btn">‚ùÆ</button>
                  <button class="fk-gallery-btn fk-next-btn">‚ùØ</button>
                </div>
                <div class="fk-gallery-dots" id="fkGalleryDots"></div>
              </div>
              <div class="fk-gallery-thumbs" id="fkGalleryThumbs"></div>
            </div>
          </div>
          
          <div class="product-detail-info">
            <h1 class="product-detail-title" id="detailTitle"></h1>
            <!-- Product SKU -->
            <div class="product-sku" id="detailSku"></div>
            <div class="product-detail-price" id="detailPrice"></div>
            <!-- Stock Status -->
            <div class="stock-status in-stock" id="detailStockStatus">In Stock</div>
            <div class="product-detail-desc" id="detailDesc"></div>
            <div class="product-detail-full-desc" id="detailFullDesc"></div>
            
            <!-- NEW: Share Link Section -->
            <div class="product-detail-meta" style="margin-top: 20px;">
              <h4>Share This Product</h4>
              <div style="display: flex; gap: 10px; margin-top: 10px;">
                <input type="text" id="productShareLink" readonly style="flex: 1; padding: 10px; border: 1px solid var(--border); border-radius: var(--radius); background: #f8fafc;">
                <button class="btn secondary" id="copyShareLink">Copy Link</button>
              </div>
            </div>
            
            <!-- Social Sharing Buttons -->
            <div class="social-sharing">
              <button class="share-btn facebook" data-platform="facebook">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                </svg>
                Share
              </button>
              <button class="share-btn twitter" data-platform="twitter">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                </svg>
                Tweet
              </button>
              <button class="share-btn whatsapp" data-platform="whatsapp">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335 .157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                </svg>
                Share
              </button>
            </div>
            
            <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:20px;">
              <button class="btn" id="detailOrderBtn">Order Now</button>
              <button class="btn secondary" id="detailWishlistBtn">Add to Wishlist</button>
              <button class="btn secondary" onclick="showPage('productsPage')">Continue Shopping</button>
            </div>
          </div>
        </div>

        <!-- Similar Products Section -->
        <div class="similar-products">
          <h2 class="similar-title">Similar Products</h2>
          <div class="slider-container">
            <div class="slider-track" id="similarProductsSlider"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Order Details Page -->
    <section class="page" id="orderPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Order Details</h3>
        <p style="color:var(--muted)">Choose size/quantity and confirm product before entering contact or payment details.</p>

        <div id="selectedProductCard" class="card" style="margin-bottom:16px">
          <div style="display:flex;gap:16px;flex-direction:column">
            <div id="galleryMain" class="gallery-main">
              <button class="carousel-control prev">&#10094;</button>
              <button class="carousel-control next">&#10095;</button>
              <div class="carousel-dots"></div>
            </div>
          </div>
          <div class="card-body">
            <div class="title" id="spTitle"></div>
            <div class="price" id="spPrice"></div>
            <div class="badge" id="spDesc"></div>
            
            <!-- Product Details Section -->
            <div class="product-details">
              <h4>Product Details</h4>
              <p id="spFullDesc"></p>
            </div>

            <div style="margin-top:auto">
              <!-- Updated: Size/Color Selection -->
              <label>Select size / colour</label>
              <div class="size-color-options">
                <div class="size-option selected" data-value="S">S</div>
                <div class="size-option" data-value="M">M</div>
                <div class="size-option" data-value="L">L</div>
                <div class="size-option" data-value="XL">XL</div>
              </div>
              <div class="size-validation-error" id="sizeValidationError">Please select a size to continue</div>

            <div style="height:12px"></div>
              <label>Quantity</label>
              <!-- Replaced with plus/minus quantity control -->
              <div class="quantity-control">
                <button class="qty-minus">-</button>
                <input type="number" id="qtySelect" min="1" value="1" max="10" readonly>
                <button class="qty-plus">+</button>
              </div>

              <div style="height:16px"></div>
              <div style="display:flex;gap:10px;flex-wrap:wrap">
                <button id="toUserInfo" class="btn" style="flex:1">Continue ‚Üí Provide Your Info</button>
                <button id="backToProducts" class="btn secondary" style="flex:1">Back to Products</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- User Info Page -->
    <section class="page" id="userPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Your Contact & Delivery Address</h3>
        <p style="color:var(--muted)">We do not use saved addresses. Please provide a fresh delivery address for this order.</p>

        <div style="display:flex;gap:16px;flex-direction:column">
          <div>
            <label>Full Name *</label>
            <input id="fullname" placeholder="Enter full name" />
          </div>
          <div class="row">
            <div class="col"><label>Mobile Number *</label><input id="mobile" placeholder="10-digit mobile number" /></div>
            <div class="col"><label>Pincode *</label><input id="pincode" placeholder="Pincode" /></div>
          </div>
          <div class="row">
            <div class="col"><label>City *</label><input id="city" /></div>
            <div class="col"><label>State *</label><input id="state" /></div>
          </div>
          <div>
            <label>House / Street *</label>
            <input id="house" />
          </div>
          <div style="display:flex;gap:10px;margin-top:16px;flex-wrap:wrap">
            <button id="toPayment" class="btn" style="flex:1">Continue to Payment</button>
            <button id="editOrder" class="btn secondary" style="flex:1">Edit Order Details</button>
            <button id="saveUserInfo" class="btn secondary" style="flex:1">Save Information</button>
          </div>
          <div style="margin-top:16px;color:var(--muted);font-size:14px">
            <strong>Note:</strong> If you prefer to change products, click "Edit Order Details" or use "Products" to go back.
          </div>
        </div>
      </div>
    </section>

    <!-- Payment Page -->
    <section class="page" id="paymentPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Payment Method</h3>
        <div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px">
          <label style="flex:1;display:flex;align-items:center;gap:8px;padding:12px;border:1px solid var(--border);border-radius:var(--radius);cursor:pointer;">
            <input type="radio" name="pay" value="prepaid" checked /> Prepaid (UPI / Card)
          </label>
          <label style="flex:1;display:flex;align-items:center;gap:8px;padding:12px;border:1px solid var(--border);border-radius:var(--radius);cursor:pointer;">
            <input type="radio" name="pay" value="cod" /> Cash on Delivery (Note: may increase processing time)
          </label>
        </div>
        
        <div class="summary">
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Product</div><div id="sumProduct">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Qty</div><div id="sumQty">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Price</div><div id="sumPrice">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:12px;padding-bottom:8px;border-bottom:1px dashed var(--border)"><div>Delivery</div><div id="sumDel">‚Çπ50</div></div>
          <div style="display:flex;justify-content:space-between;font-weight:700;margin-top:8px;font-size:18px"><div>Total</div><div id="sumTotal">-</div></div>
        </div>
        
        <div style="height:16px"></div>
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <button id="confirmOrder" class="btn" style="flex:1">Confirm & Place Order</button>
          <button id="payBack" class="btn secondary" style="flex:1">Back</button>
        </div>
      </div>
    </section>

    <!-- Order Success (hidden) -->
    <section class="page center" id="successPage">
      <div class="card-panel" style="max-width:520px;margin:32px auto;padding:32px">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin:0 auto 16px">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <div style="font-size:24px;font-weight:700;color:var(--success);margin-bottom:8px" id="successTitle">Your Order is Placed ‚úÖ</div>
        <div style="margin-top:10px;color:var(--muted)" id="successMessage">
          Order ID: <strong id="orderIdDisplay"></strong><br>
          Take screenshot for future reference.
        </div>
        <div style="margin-top:24px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
          <button id="goHome" class="btn">Back to Home</button>
          <button id="viewOrders" class="btn secondary">View My Orders</button>
        </div>
      </div>
    </section>

    <!-- My Orders Page -->
    <section class="page" id="myOrdersPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="orders-container">
          <h2>My Orders</h2>
          <p style="color:var(--muted);margin-bottom:24px">View and manage your recent orders</p>
          
          <div id="ordersList">
            <!-- Orders will be dynamically inserted here -->
          </div>
          
          <div id="noOrders" class="card-panel center" style="display:none">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--muted-light)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <h3 style="margin:16px 0 8px;color:var(--muted)">No orders yet</h3>
            <p style="color:var(--muted-light)">You haven't placed any orders yet. Start shopping to see your orders here.</p>
            <button class="btn" style="margin-top:16px" onclick="showPage('productsPage')">Start Shopping</button>
            </div>
        </div>
      </div>
    </section>

    <!-- Order Detail Page -->
    <section class="page" id="orderDetailPage">
      <div class="policy-page">
        <div class="back-button" onclick="showMyOrders(); showPage('myOrdersPage');">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to My Orders
        </div>
        
        <div class="orders-container">
          <h2>Order Details</h2>
          
          <div class="order-detail-page" id="orderDetailContent">
            <!-- Order details will be dynamically inserted here -->
          </div>
        </div>
      </div>
    </section>

    <!-- Wishlist Page -->
    <section class="page" id="wishlistPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="orders-container">
          <h2>My Wishlist</h2>
          <p style="color:var(--muted);margin-bottom:24px">Your favorite products</p>
          
          <div id="wishlistItems">
            <!-- Wishlist items will be dynamically inserted here -->
          </div>
          
          <div id="emptyWishlist" class="card-panel center" style="display:none">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--muted-light)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <h3 style="margin:16px 0 8px;color:var(--muted)">Your wishlist is empty</h3>
            <p style="color:var(--muted-light)">You haven't added any products to your wishlist yet.</p>
            <button class="btn" style="margin-top:16px" onclick="showPage('productsPage')">Browse Products</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Refund & Cancellation Policy -->
    <section class="page" id="cancellationPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Refund & Cancellation Policy</h2>
          
          <h3>Cancellation Policy</h3>
          <p>You can cancel your order before it has been shipped. Once your order has been shipped, you can no longer cancel it. If you wish to cancel your order, please contact us immediately at <strong>buyzocartshop@gmail.com</strong> with your order details.</p>
          
          <h3>Refund Policy</h3>
          <p>We offer refunds only in cases where the product is defective, damaged, or not as described. Refunds will be processed to the original payment method within 7-14 business days after we receive the returned product.</p>
          
          <h3>Return Policy</h3>
          <p>To be eligible for a return, your item must be unused and in the same condition that you received it. It must also be in the original packaging. Some types of goods are exempt from being returned, such as perishable goods and personal care items.</p>
          
          <h3>Contact Us</h3>
          <p>If you have any questions about our Refund & Cancellation Policy, please contact us:</p>
          <ul>
            <li>Email: <strong>buyzocartshop@gmail.com</strong></li>
            <li>Help Center: <strong>buyzocart.help@gmail.com</strong></li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Terms & Conditions -->
    <section class="page" id="termsPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Terms & Conditions</h2>
          
          <h3>Introduction</h3>
          <p>Welcome to Buyzo Cart. These terms and conditions outline the rules and regulations for the use of Buyzo Cart's Website.</p>
          
          <h3>Intellectual Property Rights</h3>
          <p>Other than the content you own, under these Terms, Buyzo Cart and/or its licensors own all the intellectual property rights and materials contained in this Website.</p>
          
          <h3>Restrictions</h3>
          <p>You are specifically restricted from all of the following:</p>
          <ul>
            <li>publishing any Website material in any other media;</li>
            <li>selling, sublicensing and/or otherwise commercializing any Website material;</li>
            <li>publicly performing and/or showing any Website material;</li>
            <li>using this Website in any way that is or may be damaging to this Website;</li>
            <li>using this Website in any way that impacts user access to this Website;</li>
            <li>using this Website contrary to applicable laws and regulations, or in any way may cause harm to the Website, or to any person or business entity;</li>
            <li>engaging in any data mining, data harvesting, data extracting or any other similar activity in relation to this Website;</li>
            <li>using this Website to engage in any advertising or marketing.</li>
          </ul>
          
          <h3>Your Content</h3>
          <p>In these Website Standard Terms and Conditions, "Your Content" shall mean any audio, video text, images or other material you choose to display on this Website. By displaying Your Content, you grant Buyzo Cart a non-exclusive, worldwide irrevocable, sub licensable license to use, reproduce, adapt, publish, translate and distribute it in any and all media.</p>
          
          <h3>No warranties</h3>
          <p>This Website is provided "as is," with all faults, and Buyzo Cart express no representations or warranties, of any kind related to this Website or the materials contained on this Website.</p>
          
          <h3>Limitation of liability</h3>
          <p>In no event shall Buyzo Cart, nor any of its officers, directors and employees, be held liable for anything arising out of or in any way connected with your use of this Website whether such liability is under contract. Buyzo Cart, including its officers, directors and employees shall not be held liable for any indirect, consequential or special liability arising out of or in any way related to your use of this Website.</p>
          
          <h3>Indemnification</h3>
          <p>You hereby indemnify to the fullest extent Buyzo Cart from and against any and/or all liabilities, costs, demands, causes of action, damages and expenses arising in any way related to your breach of any of the provisions of these Terms.</p>
          
          <h3>Severability</h3>
          <p>If any provision of these Terms is found to be invalid under any applicable law, such provisions shall be deleted without affecting the remaining provisions herein.</p>
          
          <h3>Variation of Terms</h3>
          <p>Buyzo Cart is permitted to revise these Terms at any time as it sees fit, and by using this Website you are expected to review these Terms on a regular basis.</p>
          
          <h3>Governing Law & Jurisdiction</h3>
          <p>These Terms will be governed by and interpreted in accordance with the laws of the State of [Your Country/State], and you submit to the non-exclusive jurisdiction of the state and federal courts located in [Your Country/State] for the resolution of any disputes.</p>
        </div>
      </div>
    </section>

    <!-- Shipping Policy -->
    <section class="page" id="shippingPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Shipping Policy</h2>
          
          <h3>Shipping Destinations</h3>
          <p>We currently ship to all major cities and towns across India. We are continuously expanding our shipping network to reach more locations.</p>
          
          <h3>Shipping Time</h3>
          <p>Standard shipping time is 5-7 business days. Express shipping (2-3 business days) is available for select locations at an additional cost.</p>
          
          <h3>Shipping Costs</h3>
          <p>Shipping costs are calculated based on the delivery location and the size/weight of your order. Free shipping is available on orders above ‚Çπ999.</p>
          
          <h3>Order Processing</h3>
          <p>Orders are processed within 24-48 hours of placement. You will receive a confirmation email with tracking information once your order has been shipped.</p>
          
          <h3>International Shipping</h3>
          <p>Currently, we do not offer international shipping. We only ship within India.</p>
          
          <h3>Tracking Your Order</h3>
          <p>Once your order is shipped, you will receive a tracking number via email and SMS. You can use this tracking number to check the status of your delivery on our website or the courier partner's website.</p>
          
          <h3>Delivery Issues</h3>
          <p>If you face any issues with your delivery, please contact us immediately at <strong>buyzocartshop@gmail.com</strong> with your order details.</p>
        </div>
      </div>
    </section>

    <!-- Privacy Policy -->
    <section class="page" id="privacyPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Privacy Policy</h2>
          
          <h3>Introduction</h3>
          <p>At Buyzo Cart, we are committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website.</p>
          
          <h3>Information We Collect</h3>
          <p>We may collect information about you in a variety of ways. The information we may collect via the Website includes:</p>
          <ul>
            <li><strong>Personal Data:</strong> Personally identifiable information, such as your name, shipping address, email address, and telephone number, that you voluntarily give to us when you register with the Website or when you choose to participate in various activities related to the Website.</li>
            <li><strong>Derivative Data:</strong> Information our servers automatically collect when you access the Website, such as your IP address, your browser type, your operating system, your access times, and the pages you have viewed directly before and after accessing the Website.</li>
            <li><strong>Financial Data:</strong> Financial information, such as data related to your payment method (e.g., valid credit card number, card brand, expiration date) that we may collect when you purchase, order, return, exchange, or request information about our services from the Website.</li>
          </ul>
          
          <h3>Use of Your Information</h3>
          <p>Having accurate information about you permits us to provide you with a smooth, efficient, and customized experience. Specifically, we may use information collected about you via the Website to:</p>
          <ul>
            <li>Create and manage your account.</li>
            <li>Process your transactions.</li>
            <li>Email you regarding your account or order.</li>
            <li>Enable user-to-user communications.</li>
            <li>Generate a personal profile about you to make future visits to the Website more personalized.</li>
            <li>Increase the efficiency and operation of the Website.</li>
            <li>Monitor and analyze usage and trends to improve your experience with the Website.</li>
            <li>Notify you of updates to the Website.</li>
            <li>Offer new products, services, and/or recommendations to you.</li>
            <li>Perform other business activities as needed.</li>
            <li>Prevent fraudulent transactions, monitor against theft, and protect against criminal activity.</li>
            <li>Request feedback and contact you about your use of the Website.</li>
            <li>Resolve disputes and troubleshoot problems.</li>
            <li>Respond to product and customer service requests.</li>
            <li>Send you a newsletter.</li>
            <li>Solicit support for the Website.</li>
          </ul>
          
          <h3>Disclosure of Your Information</h3>
          <p>We may share information we have collected about you in certain situations. Your information may be disclosed as follows:</p>
          <ul>
            <li><strong>By Law or to Protect Rights:</strong> If we believe the release of information about you is necessary to respond to legal process, to investigate or remedy potential violations of our policies, or to protect the rights, property, and safety of others, we may share your information as permitted or required by any applicable law, rule, or regulation.</li>
            <li><strong>Third-Party Service Providers:</strong> We may share your information with third parties that perform services for us or on our behalf, including payment processing, data analysis, email delivery, hosting services, customer service, and marketing assistance.</li>
            <li><strong>Marketing Communications:</strong> With your consent, or with an opportunity for you to withdraw consent, we may share your information with third parties for marketing purposes, as permitted by law.</li>
            <li><strong>Interactions with Other Users:</strong> If you interact with other users of the Website, those users may see your name, profile photo, and descriptions of your activity, including sending invitations to other users, chatting with other users, liking posts, following blogs.</li>
            <li><strong>Online Postings:</strong> When you post comments, contributions or other content to the Website, your posts may be viewed by all users and may be publicly distributed outside the Website in perpetuity.</li>
            <li><strong>Third-Party Advertisers:</strong> We may use third-party advertising companies to serve ads when you visit the Website. These companies may use information about your visits to the Website and other websites that are contained in web cookies in order to provide advertisements about goods and services of interest to you.</li>
          </ul>
          
          <h3>Security of Your Information</h3>
          <p>We use administrative, technical, and physical security measures to help protect your personal information. While we have taken reasonable steps to secure the personal information you provide to us, please be aware that despite our efforts, no security measures are perfect or impenetrable, and no method of data transmission can be guaranteed against any interception or other type of misuse.</p>
          
          <h3>Policy for Children</h3>
          <p>We do not knowingly solicit information from or market to children under the age of 13. If you become aware of any data we have collected from children under age 13, please contact us using the contact information provided below.</p>
          
          <h3>Controls for Do-Not-Track Features</h3>
          <p>Most web browsers and some mobile operating systems include a Do-Not-Track ("DNT") feature or setting you can activate to signal your privacy preference not to have data about your online browsing activities monitored and collected. No uniform technology standard for recognizing and implementing DNT signals has been finalized. As such, we do not currently respond to DNT browser signals or any other mechanism that automatically communicates your choice not to be tracked online.</p>
          
          <h3>Contact Us</h3>
          <p>If you have questions or comments about this Privacy Policy, please contact us at:</p>
          <p><strong>buyzocartshop@gmail.com</strong></p>
        </div>
      </div>
    </section>

    <!-- Contact Us Page -->
    <section class="page" id="contactPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Contact Us</h2>
          
          <p>We'd love to hear from you! Please reach out to us with any questions, concerns, or feedback.</p>
          
          <h3>Email Us</h3>
          <p>For general inquiries: <strong>buyzocartshop@gmail.com</strong></p>
          <p>For help and support: <strong>buyzocart.help@gmail.com</strong></p>
          
          <h3>Connect With Us</h3>
          <p>Follow us on social media for the latest updates, new arrivals, and exclusive offers:</p>
          
          <div class="social-sharing" style="justify-content: flex-start; margin-top: 16px;">
            <button class="share-btn facebook" onclick="window.open('https://www.facebook.com/share/17G9Bu9fmH/', '_blank')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
              </svg>
              Facebook
            </button>
            <button class="share-btn twitter" onclick="window.open('https://www.instagram.com/buyzo.cart?igsh=d2Mxc2EwMW45cWwy', '_blank')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
              </svg>
              Instagram
            </button>
            <button class="share-btn whatsapp" onclick="window.open('https://www.youtube.com/@BuyzoCart', '_blank')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
              </svg>
              YouTube
            </button>
          </div>
          
          <h3>Business Hours</h3>
          <p>Our customer support team is available:</p>
          <ul>
            <li>Monday to Friday: 9:00 AM - 6:00 PM IST</li>
            <li>Saturday: 10:00 AM - 4:00 PM IST</li>
            <li>Sunday: Closed</li>
          </ul>
          
          <h3>Response Time</h3>
          <p>We strive to respond to all inquiries within 24 hours during business days.</p>
          
          <div class="whatsapp-contact-button" onclick="window.open('https://wa.me/919557987574', '_blank')">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335 .157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
            </svg>
            Contact us on WhatsApp
          </div>
        </div>
      </div>
    </section>

    <!-- About Us Page -->
    <section class="page" id="aboutPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>About Buyzo Cart</h2>
          
          <p>Welcome to Buyzo Cart, your trusted online shopping destination for quality products at affordable prices.</p>
          
          <h3>Our Story</h3>
          <p>Buyzo Cart was founded with a simple mission: to make online shopping accessible, convenient, and enjoyable for everyone. We started as a small team passionate about e-commerce and have grown into a platform that serves thousands of customers across India.</p>
          
          <h3>Our Values</h3>
          <ul>
            <li><strong>Quality:</strong> We carefully curate our product selection to ensure we offer only the best quality items.</li>
            <li><strong>Customer Focus:</strong> Our customers are at the heart of everything we do. We strive to provide exceptional service and support.</li>
            <li><strong>Transparency:</strong> We believe in honest pricing and clear communication with our customers.</li>
            <li><strong>Innovation:</strong> We continuously improve our platform and services to enhance your shopping experience.</li>
          </ul>
          
          <h3>Why Choose Buyzo Cart?</h3>
          <ul>
            <li>Wide selection of products across multiple categories</li>
            <li>Competitive prices and regular discounts</li>
            <li>Fast and reliable delivery across India</li>
            <li>Secure payment options</li>
            <li>Responsive customer support</li>
            <li>Easy returns and refunds</li>
          </ul>
          
          <h3>Our Team</h3>
          <p>Our diverse team of professionals is dedicated to making your shopping experience seamless and enjoyable. From our customer support representatives to our logistics partners, everyone at Buyzo Cart is committed to serving you better.</p>
          
          <h3>Looking Ahead</h3>
          <p>We're constantly working to expand our product range, improve our services, and reach more customers across India. Our goal is to become your go-to online shopping destination for all your needs.</p>
          
          <p>Thank you for choosing Buyzo Cart. We appreciate your trust and look forward to serving you!</p>
        </div>
      </div>
    </section>

    <!-- Account Page -->
    <section class="page" id="accountPage">
      <div class="account-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="account-header">
          <div class="account-avatar" id="accountPageAvatar">U</div>
          <div class="account-info">
            <h2 id="accountPageName">User Name</h2>
            <p id="accountPageEmail">user@example.com</p>
          </div>
        </div>
        
        <div class="account-menu">
          <div class="account-menu-item" onclick="showPage('myOrdersPage')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <span>My Orders</span>
          </div>
          <div class="account-menu-item" onclick="showPage('wishlistPage')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <span>Wishlist</span>
          </div>
          <div class="account-menu-item" onclick="showPage('addressPage')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            <span>Addresses</span>
          </div>
          <div class="account-menu-item" onclick="showPage('settingsPage')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="3"></circle>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>
            <span>Settings</span>
          </div>
        </div>
        
        <div class="account-section">
          <h3>Profile Information</h3>
          <div class="profile-form">
            <div>
              <label>Full Name</label>
              <input type="text" id="profileName" placeholder="Enter your full name">
            </div>
            <div>
              <label>Email Address</label>
              <input type="email" id="profileEmail" placeholder="Enter your email" readonly>
            </div>
            <div>
              <label>Phone Number</label>
              <input type="tel" id="profilePhone" placeholder="Enter your phone number">
            </div>
            <button class="btn" id="saveProfile">Save Changes</button>
          </div>
        </div>
        
        <div class="account-section">
          <h3>Account Security</h3>
          <div class="setting-item">
            <div class="setting-info">
              <h4>Change Password</h4>
              <p>Update your password regularly to keep your account secure</p>
            </div>
            <button class="btn secondary" id="changePasswordBtn">Change</button>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <h4>Two-Factor Authentication</h4>
              <p>Add an extra layer of security to your account</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="twoFactorToggle">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
        
        <div class="account-section">
          <h3>Login Activity</h3>
          <p>Last login: <span id="lastLoginTime">Loading...</span></p>
          <button class="btn secondary" id="viewLoginActivity">View All Activity</button>
        </div>
        
        <div class="account-section">
          <h3>Danger Zone</h3>
          <p>Once you delete your account, there is no going back. Please be certain.</p>
          <button class="btn error" id="deleteAccountBtn">Delete Account</button>
        </div>
      </div>
    </section>

    <!-- Settings Page -->
    <section class="page" id="settingsPage">
      <div class="account-page">
        <div class="back-button" onclick="showPage('accountPage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Account
        </div>
        
        <h2>Settings</h2>
        
        <div class="account-section">
          <h3>Notifications</h3>
          <div class="setting-item">
            <div class="setting-info">
              <h4>Email Notifications</h4>
              <p>Receive order updates and promotional emails</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="emailNotifications" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <h4>SMS Notifications</h4>
              <p>Receive order updates via SMS</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="smsNotifications" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <h4>Push Notifications</h4>
              <p>Receive push notifications on your device</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="pushNotifications" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
        
        <div class="account-section">
          <h3>Privacy</h3>
          <div class="setting-item">
            <div class="setting-info">
              <h4>Personalized Recommendations</h4>
              <p>Get product recommendations based on your browsing history</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="personalizedRecs" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <h4>Data Sharing</h4>
              <p>Allow us to use your data to improve our services</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="dataSharing" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
        
        <div class="account-section">
          <h3>Appearance</h3>
          <div class="setting-item">
            <div class="setting-info">
              <h4>Dark Mode</h4>
              <p>Toggle between light and dark theme</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="darkModeToggle">
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <h4>Language</h4>
              <p>Select your preferred language</p>
            </div>
            <select id="languageSelect">
              <option value="en">English</option>
              <option value="hi">Hindi</option>
            </select>
          </div>
        </div>
        
        <div class="account-section">
          <h3>Preferences</h3>
          <div class="setting-item">
            <div class="setting-info">
              <h4>Currency</h4>
              <p>Select your preferred currency</p>
            </div>
            <select id="currencySelect">
              <option value="INR">Indian Rupee (‚Çπ)</option>
              <option value="USD">US Dollar ($)</option>
            </select>
          </div>
        </div>
        
        <button class="btn" id="saveSettings">Save Settings</button>
      </div>
    </section>

    <!-- Address Page -->
    <section class="page" id="addressPage">
      <div class="account-page">
        <div class="back-button" onclick="showPage('accountPage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Account
        </div>
        
        <h2>My Addresses</h2>
        
        <div class="account-section">
          <h3>Saved Addresses</h3>
          <div id="savedAddresses">
            <!-- Address cards will be dynamically inserted here -->
          </div>
          <button class="btn" id="addNewAddress" style="margin-top: 16px;">Add New Address</button>
        </div>
        
        <div class="account-section" id="newAddressForm" style="display: none;">
          <h3>Add New Address</h3>
          <div class="profile-form">
            <div>
              <label>Full Name *</label>
              <input type="text" id="addressName" placeholder="Enter full name">
            </div>
            <div>
              <label>Mobile Number *</label>
              <input type="tel" id="addressMobile" placeholder="10-digit mobile number">
            </div>
            <div class="row">
              <div class="col">
                <label>Pincode *</label>
                <input type="text" id="addressPincode" placeholder="Pincode">
              </div>
              <div class="col">
                <label>City *</label>
                <input type="text" id="addressCity" placeholder="City">
              </div>
            </div>
            <div class="row">
              <div class="col">
                <label>State *</label>
                <input type="text" id="addressState" placeholder="State">
              </div>
              <div class="col">
                <label>Address Type</label>
                <select id="addressType">
                  <option value="home">Home</option>
                  <option value="work">Work</option>
                  <option value="other">Other</option>
                </select>
              </div>
            </div>
            <div>
              <label>House / Street *</label>
              <textarea id="addressStreet" placeholder="House no., Building, Street, Area" rows="3"></textarea>
            </div>
            <div class="row">
              <div class="col">
                <button class="btn" id="saveAddress">Save Address</button>
              </div>
              <div class="col">
                <button class="btn secondary" id="cancelAddAddress">Cancel</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="footer-container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Buyzo Cart</h3>
          <p style="color:var(--muted);margin-bottom:16px">Your trusted online shopping destination for quality products at affordable prices.</p>
          <div class="contact-info">
            <p>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
              buyzocartshop@gmail.com
            </p>
            <p>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
              </svg>
              9557987574
            </p>
          </div>
          <div class="social-links">
            <a href="https://www.instagram.com/buyzo.cart?igsh=d2Mxc2EwMW45cWwy" target="_blank" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
              </svg>
            </a>
            <a href="https://www.youtube.com/@BuyzoCart" target="_blank" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
              </svg>
            </a>
            <a href="https://t.me/buyzocartshop" target="_blank" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.447 1.394c-.14.141-.259.259-.374.261l.213-3.053 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.136-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/>
              </svg>
            </a>
            <a href="https://www.facebook.com/share/17G9Bu9fmH/" target="_blank" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"/>
              </svg>
            </a>
          </div>
        </div>
        
        <div class="footer-section">
          <h3>Quick Links</h3>
          <ul class="footer-links">
            <li><a onclick="showPage('homePage')">Home</a></li>
            <li><a onclick="showPage('productsPage')">Products</a></li>
            <li><a onclick="checkAuthAndShowPage('myOrdersPage')">My Orders</a></li>
            <li><a onclick="checkAuthAndShowPage('wishlistPage')">Wishlist</a></li>
            <li><a onclick="showPage('aboutPage')">About Us</a></li>
            <li><a onclick="showPage('contactPage')">Contact Us</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h3>Customer Service</h3>
          <ul class="footer-links">
            <li><a onclick="showPage('shippingPage')">Shipping Policy</a></li>
            <li><a onclick="showPage('cancellationPage')">Refund & Cancellation</a></li>
            <li><a onclick="showPage('termsPage')">Terms & Conditions</a></li>
            <li><a onclick="showPage('privacyPage')">Privacy Policy</a></li>
            <li><a onclick="showPage('contactPage')">Help & Support</a></li>
            <li><a onclick="showPage('contactPage')">FAQs</a></li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="copyright">
      &copy; 2024 Buyzo Cart. All rights reserved.
    </div>
  </footer>

  <!-- Toast Notification -->
  <div class="toast" id="toast"></div>

  <!-- Amazon/Flipkart Style Sticky Buttons -->
  <div class="fk-sticky-buttons" id="fkStickyButtons">
    <button class="fk-sticky-btn fk-sticky-addcart" id="fkAddToCart">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="9" cy="21" r="1"></circle>
        <circle cx="20" cy="21" r="1"></circle>
        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
      </svg>
      Add to Cart
    </button>
    <button class="fk-sticky-btn fk-sticky-buynow" id="fkBuyNow">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <path d="M16 10a4 4 0 0 1-8 0"></path>
      </svg>
      Buy Now
    </button>
  </div>

  <!-- Amazon/Flipkart Style Full Screen Zoom Modal -->
  <div class="modal-overlay fk-zoom-modal" id="fkZoomModal">
    <div class="fk-zoom-content">
      <button class="fk-zoom-close" id="fkZoomClose">√ó</button>
      <img class="fk-zoom-image" id="fkZoomImage" src="" alt="Zoomed product image">
    </div>
  </div>

  <!-- Login/Signup Modal -->
  <div class="modal-overlay" id="authModal">
    <div class="auth-modal">
      <button class="auth-close" id="authClose">√ó</button>
      <h3>Welcome to Buyzo Cart</h3>
      
      <div class="auth-tabs">
        <div class="auth-tab active" id="loginTab">Login</div>
        <div class="auth-tab" id="signupTab">Sign Up</div>
      </div>
      
      <!-- Login Form -->
      <div class="auth-form active" id="loginForm">
        <div class="auth-form-group">
          <label>Email</label>
          <input type="email" id="loginEmail" placeholder="Enter your email">
        </div>
        <div class="auth-form-group">
          <label>Password</label>
          <input type="password" id="loginPassword" placeholder="Enter your password">
        </div>
        <!-- NEW: Login Error Display -->
        <div id="loginError" style="color:red; font-size:14px; margin-bottom:12px;"></div>
        <button class="btn" id="loginBtn" style="width:100%">Login</button>
        
        <div class="divider"><span>or</span></div>
        
        <button class="google-signin-btn" id="googleLoginBtn">
          <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google">
          Continue with Google
        </button>
        
        <div class="auth-form-footer">
          <a id="forgotPasswordLink">Forgot Password?</a>
        </div>
      </div>
      
      <!-- Signup Form -->
      <div class="auth-form" id="signupForm">
        <div class="auth-form-group">
          <label>Full Name</label>
          <input type="text" id="signupName" placeholder="Enter your full name">
        </div>
        <div class="auth-form-group">
          <label>Email</label>
          <input type="email" id="signupEmail" placeholder="Enter your email">
        </div>
        <div class="auth-form-group">
          <label>Password</label>
          <input type="password" id="signupPassword" placeholder="Create a password">
        </div>
        <!-- NEW: Signup Error Display -->
        <div id="signupError" style="color:red; font-size:14px; margin-bottom:12px;"></div>
        <button class="btn" id="signupBtn" style="width:100%">Sign Up</button>
        
        <div class="divider"><span>or</span></div>
        
        <button class="google-signin-btn" id="googleSignupBtn">
          <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google">
          Continue with Google
        </button>
        
        <div class="auth-form-footer">
          Already have an account? <a id="switchToLogin">Login</a>
        </div>
      </div>
      
      <!-- Forgot Password Form -->
      <div class="forgot-password-form" id="forgotPasswordForm">
        <div class="auth-form-group">
          <label>Email</label>
          <input type="email" id="forgotPasswordEmail" placeholder="Enter your email">
        </div>
        <button class="btn" id="resetPasswordBtn" style="width:100%">Reset Password</button>
        <div class="back-to-login" id="backToLogin">Back to Login</div>
      </div>
    </div>
  </div>

  <!-- Image Zoom Modal -->
  <div class="modal-overlay zoom-modal" id="zoomModal">
    <div class="zoom-content">
      <button class="zoom-close" id="zoomClose">√ó</button>
      <img class="zoom-image" id="zoomImage" src="" alt="Zoomed product image">
      <div class="zoom-controls">
        <button class="zoom-btn" id="zoomIn">+</button>
        <button class="zoom-btn" id="zoomOut">-</button>
        <button class="zoom-btn" id="zoomReset">‚ü≤</button>
      </div>
    </div>
  </div>

  <!-- Cancellation Modal -->
  <div class="modal-overlay" id="cancellationModal">
    <div class="cancellation-modal">
      <h3>Cancel Order</h3>
      <p>Please select a reason for cancellation:</p>
      
      <div class="cancellation-reason selected">
        <label>
          <input type="radio" name="cancelReason" value="changed-mind" checked> Changed my mind
        </label>
      </div>
      <div class="cancellation-reason">
        <label>
          <input type="radio" name="cancelReason" value="shipping-delay"> Shipping is taking too long
        </label>
      </div>
      <div class="cancellation-reason">
        <label>
          <input type="radio" name="cancelReason" value="found-better-price"> Found a better price elsewhere
        </label>
      </div>
      <div class="cancellation-reason">
        <label>
          <input type="radio" name="cancelReason" value="ordered-by-mistake"> Ordered by mistake
        </label>
      </div>
      <div class="cancellation-reason">
        <label>
          <input type="radio" name="cancelReason" value="other"> Other reason
        </label>
      </div>
      
      <div class="cancellation-actions">
        <button class="btn secondary" id="cancelCancel">Cancel</button>
        <button class="btn error" id="confirmCancel">Confirm Cancellation</button>
      </div>
    </div>
  </div>

  <!-- Cancel Order Confirmation Modal -->
  <div class="modal-overlay" id="cancelConfirmModal">
    <div class="cancel-confirm-modal">
      <h3>Cancel Order</h3>
      <p>Are you sure you want to cancel this order? This action cannot be undone.</p>
      
      <div class="payment-charge-note">
        <strong>Note:</strong> If you paid online, your refund will be processed within 5-7 business days.
      </div>
      
      <div class="refund-calculation">
        <p><strong>Refund Details:</strong></p>
        <p>Order Total: <span id="refundOrderTotal">‚Çπ0</span></p>
        <p>Payment Gateway Charges (if any): <span id="refundCharges">‚Çπ0</span></p>
        <p style="font-weight:bold;color:var(--success)">Net Refund Amount: <span id="refundNetAmount">‚Çπ0</span></p>
      </div>
      
      <div class="cancel-confirm-actions">
        <button class="btn secondary" id="cancelCancelConfirm">No, Keep Order</button>
        <button class="btn error" id="finalConfirmCancel">Yes, Cancel Order</button>
      </div>
    </div>
  </div>

  <!-- Alert Modal -->
  <div class="modal-overlay" id="alertModal">
    <div class="alert-modal">
      <div class="alert-icon">‚ö†Ô∏è</div>
      <h3 id="alertTitle">Alert</h3>
      <p id="alertMessage">This is an alert message.</p>
      <!-- NEW: Updated buttons for alert modal -->
      <div class="alert-modal-buttons">
        <button class="btn secondary" id="alertCancelBtn">Cancel</button>
        <button class="btn" id="alertConfirmBtn">Yes</button>
      </div>
    </div>
  </div>

  <!-- Firebase Configuration -->
  <script>
    // Updated Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAeB7VzIxJaNYagUPoKd-kN5HXmLbS2-Vw",
      authDomain: "videomanager-23d98.firebaseapp.com",
      databaseURL: "https://videomanager-23d98-default-rtdb.firebaseio.com",
      projectId: "videomanager-23d98",
      storageBucket: "videomanager-23d98.firebasestorage.app",
      messagingSenderId: "847321523576",
      appId: "1:847321523576:web:bda3f5026e3e163603548d",
      measurementId: "G-YBSJ1KMPV4"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    const realtimeDb = firebase.database();

    // Initialize EmailJS
    emailjs.init("user_your_emailjs_user_id_here");
  </script>

  <!-- JavaScript -->
  <script>
    // Global variables
    let currentUser = null;
    let currentProduct = null;
    let userInfo = {};
    let currentOrderId = null;
    let products = [];
    let categories = [];
    let banners = [];
    let wishlist = [];
    let recentlyViewed = [];
    let currentImageIndex = 0;
    let currentZoomLevel = 1;

    // Amazon/Flipkart Gallery Variables
    let fkCurrentSlide = 0;
    let fkIsDragging = false;
    let fkStartPos = 0;
    let fkCurrentTranslate = 0;
    let fkPrevTranslate = 0;
    let fkAnimationID = null;
    let fkImages = [];

    // NEW: Order ID Generation Function
    function generateOrderId() {
        const date = new Date();
        const yyyy = date.getFullYear();
        const mm = String(date.getMonth() + 1).padStart(2, '0');
        const dd = String(date.getDate()).padStart(2, '0');
        const randomNum = Math.floor(100000 + Math.random() * 900000); 
        return `ORDER-${yyyy}${mm}${dd}-${randomNum}`;
    }

    // DOM Elements
    const menuIcon = document.getElementById('menuIcon');
    const mobileMenu = document.getElementById('mobileMenu');
    const menuOverlay = document.getElementById('menuOverlay');
    const menuClose = document.getElementById('menuClose');
    const themeToggle = document.getElementById('themeToggle');
    const toast = document.getElementById('toast');
    const authModal = document.getElementById('authModal');
    const authClose = document.getElementById('authClose');
    const loginTab = document.getElementById('loginTab');
    const signupTab = document.getElementById('signupTab');
    const loginForm = document.getElementById('loginForm');
    const signupForm = document.getElementById('signupForm');
    const loginBtn = document.getElementById('loginBtn');
    const signupBtn = document.getElementById('signupBtn');
    const googleLoginBtn = document.getElementById('googleLoginBtn');
    const googleSignupBtn = document.getElementById('googleSignupBtn');
    const switchToLogin = document.getElementById('switchToLogin');
    const forgotPasswordLink = document.getElementById('forgotPasswordLink');
    const forgotPasswordForm = document.getElementById('forgotPasswordForm');
    const backToLogin = document.getElementById('backToLogin');
    const resetPasswordBtn = document.getElementById('resetPasswordBtn');
    const openLoginTop = document.getElementById('openLoginTop');
    const userProfile = document.getElementById('userProfile');
    const userAvatar = document.getElementById('userAvatar');
    const userName = document.getElementById('userName');
    const accountDropdown = document.getElementById('accountDropdown');
    const accountEmail = document.getElementById('accountEmail');
    const mobileLoginBtn = document.getElementById('mobileLoginBtn');
    const mobileUserProfile = document.getElementById('mobileUserProfile');
    const mobileUserName = document.getElementById('mobileUserName');
    const openMyOrdersTop = document.getElementById('openMyOrdersTop');
    const openContactTop = document.getElementById('openContactTop');
    const zoomModal = document.getElementById('zoomModal');
    const zoomClose = document.getElementById('zoomClose');
    const zoomImage = document.getElementById('zoomImage');
    const zoomIn = document.getElementById('zoomIn');
    const zoomOut = document.getElementById('zoomOut');
    const zoomReset = document.getElementById('zoomReset');

    // Amazon/Flipkart Gallery Elements
    const fkGalleryMain = document.getElementById('fkGalleryMain');
    const fkGalleryTrack = document.getElementById('fkGalleryTrack');
    const fkGalleryDots = document.getElementById('fkGalleryDots');
    const fkGalleryThumbs = document.getElementById('fkGalleryThumbs');
    const fkPrevBtn = document.querySelector('.fk-prev-btn');
    const fkNextBtn = document.querySelector('.fk-next-btn');
    const fkStickyButtons = document.getElementById('fkStickyButtons');
    const fkAddToCart = document.getElementById('fkAddToCart');
    const fkBuyNow = document.getElementById('fkBuyNow');
    const fkZoomModal = document.getElementById('fkZoomModal');
    const fkZoomImage = document.getElementById('fkZoomImage');
    const fkZoomClose = document.getElementById('fkZoomClose');

    // NEW: Error Display Elements
    const loginError = document.getElementById('loginError');
    const signupError = document.getElementById('signupError');

    // Initialize the app
    document.addEventListener('DOMContentLoaded', function() {
      initApp();
      setupEventListeners();
      loadProductsFromRealtimeDB();
      loadCategoriesFromRealtimeDB();
      loadBannersFromRealtimeDB();
      setupHeroMessages();
      updateStepPills();
      checkUrlForProduct();
      
      // Check authentication state
      auth.onAuthStateChanged(user => {
        if (user) {
          currentUser = user;
          updateUIForUser(user);
          loadUserData(user);
          loadWishlist(user);
          loadRecentlyViewed(user);
        } else {
          currentUser = null;
          updateUIForGuest();
        }
      });
    });

    function initApp() {
      // Set initial theme
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
      if (savedTheme === 'dark') {
        document.getElementById('darkModeToggle').checked = true;
      }
      
      // Show home page by default
      showPage('homePage');
    }

    // NEW: Check URL for product parameter
    function checkUrlForProduct() {
      const urlParams = new URLSearchParams(window.location.search);
      const productId = urlParams.get('product');
      if (productId) {
        // Find product by ID and show detail page
        const product = products.find(p => p.id === productId);
        if (product) {
          setTimeout(() => {
            showProductDetail(product);
          }, 500);
        }
      }
    }

    function setupEventListeners() {
      // Mobile menu
      menuIcon.addEventListener('click', openMenu);
      menuClose.addEventListener('click', closeMenu);
      menuOverlay.addEventListener('click', closeMenu);
      
      // Theme toggle
      themeToggle.addEventListener('click', toggleTheme);
      
      // Auth modal
      authClose.addEventListener('click', () => authModal.classList.remove('active'));
      openLoginTop.addEventListener('click', showLoginModal);
      mobileLoginBtn.addEventListener('click', showLoginModal);
      
      // Auth tabs
      loginTab.addEventListener('click', () => switchAuthTab('login'));
      signupTab.addEventListener('click', () => switchAuthTab('signup'));
      switchToLogin.addEventListener('click', () => switchAuthTab('login'));
      
      // Auth forms
      loginBtn.addEventListener('click', handleLogin);
      signupBtn.addEventListener('click', handleSignup);
      googleLoginBtn.addEventListener('click', handleGoogleLogin);
      googleSignupBtn.addEventListener('click', handleGoogleLogin);
      
      // Forgot password
      forgotPasswordLink.addEventListener('click', () => {
        loginForm.classList.remove('active');
        forgotPasswordForm.classList.add('active');
      });
      backToLogin.addEventListener('click', () => {
        forgotPasswordForm.classList.remove('active');
        loginForm.classList.add('active');
      });
      resetPasswordBtn.addEventListener('click', handleResetPassword);
      
      // User profile dropdown
      userProfile.addEventListener('click', toggleAccountDropdown);
      document.addEventListener('click', (e) => {
        if (!userProfile.contains(e.target)) {
          accountDropdown.classList.remove('active');
        }
      });
      
      // Navigation
      openMyOrdersTop.addEventListener('click', () => checkAuthAndShowPage('myOrdersPage'));
      openContactTop.addEventListener('click', () => showPage('contactPage'));
      
      // Image zoom
      zoomClose.addEventListener('click', () => zoomModal.classList.remove('active'));
      zoomIn.addEventListener('click', () => adjustZoom(0.2));
      zoomOut.addEventListener('click', () => adjustZoom(-0.2));
      zoomReset.addEventListener('click', resetZoom);
      
      // Search functionality
      const searchInput = document.getElementById('searchInput');
      const homeSearchInput = document.getElementById('homeSearchInput');
      
      if (searchInput) {
        searchInput.addEventListener('input', handleSearch);
      }
      
      if (homeSearchInput) {
        homeSearchInput.addEventListener('input', handleHomeSearch);
      }
      
      // Order flow buttons
      document.getElementById('backToProducts')?.addEventListener('click', () => showPage('productsPage'));
      document.getElementById('toUserInfo')?.addEventListener('click', toUserInfo);
      document.getElementById('editOrder')?.addEventListener('click', () => showPage('orderPage'));
      document.getElementById('toPayment')?.addEventListener('click', toPayment);
      document.getElementById('payBack')?.addEventListener('click', () => showPage('userPage'));
      document.getElementById('confirmOrder')?.addEventListener('click', confirmOrder);
      document.getElementById('goHome')?.addEventListener('click', () => showPage('homePage'));
      document.getElementById('viewOrders')?.addEventListener('click', () => checkAuthAndShowPage('myOrdersPage'));
      
      // Quantity controls
      document.querySelector('.qty-minus')?.addEventListener('click', decreaseQuantity);
      document.querySelector('.qty-plus')?.addEventListener('click', increaseQuantity);
      
      // Size selection
      document.querySelectorAll('.size-option').forEach(option => {
        option.addEventListener('click', function() {
          document.querySelectorAll('.size-option').forEach(opt => opt.classList.remove('selected'));
          this.classList.add('selected');
          document.getElementById('sizeValidationError').classList.remove('show');
        });
      });
      
      // Price filter
      document.getElementById('applyPriceFilter')?.addEventListener('click', applyPriceFilter);
      document.getElementById('resetPriceFilter')?.addEventListener('click', resetPriceFilter);
      
      // Newsletter
      document.getElementById('subscribeBtn')?.addEventListener('click', handleNewsletterSubscription);
      
      // Share buttons
      document.querySelectorAll('.share-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const platform = this.getAttribute('data-platform');
          shareProduct(platform);
        });
      });
      
      // Copy share link
      document.getElementById('copyShareLink')?.addEventListener('click', copyShareLink);
      
      // Product detail buttons
      document.getElementById('detailOrderBtn')?.addEventListener('click', orderProductFromDetail);
      document.getElementById('detailWishlistBtn')?.addEventListener('click', toggleWishlistFromDetail);
      
      // Account page
      document.getElementById('saveProfile')?.addEventListener('click', saveProfile);
      document.getElementById('changePasswordBtn')?.addEventListener('click', changePassword);
      document.getElementById('deleteAccountBtn')?.addEventListener('click', deleteAccount);
      document.getElementById('saveSettings')?.addEventListener('click', saveSettings);
      
      // Address page
      document.getElementById('addNewAddress')?.addEventListener('click', showNewAddressForm);
      document.getElementById('cancelAddAddress')?.addEventListener('click', hideNewAddressForm);
      document.getElementById('saveAddress')?.addEventListener('click', saveAddress);
      
      // Dark mode toggle in settings
      document.getElementById('darkModeToggle')?.addEventListener('change', function() {
        toggleTheme();
      });

      // Amazon/Flipkart Gallery Event Listeners
      fkPrevBtn?.addEventListener('click', fkPrevSlide);
      fkNextBtn?.addEventListener('click', fkNextSlide);
      fkAddToCart?.addEventListener('click', fkHandleAddToCart);
      fkBuyNow?.addEventListener('click', fkHandleBuyNow);
      fkZoomClose?.addEventListener('click', () => fkZoomModal.classList.remove('active'));

      // Touch events for swipe
      if (fkGalleryMain) {
        fkGalleryMain.addEventListener('touchstart', fkTouchStart);
        fkGalleryMain.addEventListener('touchmove', fkTouchMove);
        fkGalleryMain.addEventListener('touchend', fkTouchEnd);
      }

      // Banner touch events
      const bannerCarousel = document.getElementById('bannerCarousel');
      if (bannerCarousel) {
        bannerCarousel.addEventListener('touchstart', handleBannerTouchStart);
        bannerCarousel.addEventListener('touchmove', handleBannerTouchMove);
        bannerCarousel.addEventListener('touchend', handleBannerTouchEnd);
      }

      // Show sticky buttons when product detail page is active
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
            if (document.getElementById('productDetailPage').classList.contains('active')) {
              fkStickyButtons.classList.add('show');
            } else {
              fkStickyButtons.classList.remove('show');
            }
          }
        });
      });

      observer.observe(document.getElementById('productDetailPage'), {
        attributes: true,
        attributeFilter: ['class']
      });
    }

    // NEW: Banner touch events
    let bannerStartX = 0;
    let bannerCurrentX = 0;
    let bannerIsDragging = false;

    function handleBannerTouchStart(e) {
      bannerStartX = e.touches[0].clientX;
      bannerIsDragging = true;
    }

    function handleBannerTouchMove(e) {
      if (!bannerIsDragging) return;
      bannerCurrentX = e.touches[0].clientX;
    }

    function handleBannerTouchEnd() {
      if (!bannerIsDragging) return;
      
      const diff = bannerStartX - bannerCurrentX;
      const bannerDots = document.querySelectorAll('.banner-dot');
      const activeIndex = Array.from(bannerDots).findIndex(dot => dot.classList.contains('active'));
      
      if (diff > 50 && activeIndex < bannerDots.length - 1) {
        // Swipe left - next slide
        setBannerSlide(activeIndex + 1);
      } else if (diff < -50 && activeIndex > 0) {
        // Swipe right - previous slide
        setBannerSlide(activeIndex - 1);
      }
      
      bannerIsDragging = false;
    }

    // NEW: Load products from Realtime Database
    function loadProductsFromRealtimeDB() {
      realtimeDb.ref('products').once('value')
        .then(snapshot => {
          const productsData = snapshot.val();
          if (productsData) {
            products = Object.keys(productsData).map(key => {
              return {
                id: key,
                ...productsData[key]
              };
            });
            
            // Ensure products have valid image URLs
            products = products.map(product => {
              if (!product.image || product.image === '') {
                product.image = 'https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D&w=1000&q=80';
              }
              return product;
            });
            
            renderProducts(products, 'homeProductGrid');
            renderProducts(products, 'productGrid');
            renderProductSlider(products.slice(0, 10), 'productSlider');
          } else {
            // Fallback to sample products if no data in Realtime DB
            loadSampleProducts();
          }
        })
        .catch(error => {
          console.error('Error loading products from Realtime DB:', error);
          loadSampleProducts();
        });
    }

    // NEW: Load categories from Realtime Database
    function loadCategoriesFromRealtimeDB() {
      realtimeDb.ref('categories').once('value')
        .then(snapshot => {
          const categoriesData = snapshot.val();
          if (categoriesData) {
            categories = Object.keys(categoriesData).map(key => {
              return {
                id: key,
                ...categoriesData[key]
              };
            });
            
            renderCategories();
            renderCategoryCircles();
          } else {
            // Fallback to sample categories
            loadSampleCategories();
          }
        })
        .catch(error => {
          console.error('Error loading categories from Realtime DB:', error);
          loadSampleCategories();
        });
    }

    // NEW: Load banners from Realtime Database
    function loadBannersFromRealtimeDB() {
      realtimeDb.ref('banners').once('value')
        .then(snapshot => {
          const bannersData = snapshot.val();
          if (bannersData) {
            banners = Object.keys(bannersData).map(key => {
              return {
                id: key,
                ...bannersData[key]
              };
            });
            
            renderBannerCarousel();
          } else {
            // Fallback to sample banners
            loadSampleBanners();
          }
        })
        .catch(error => {
          console.error('Error loading banners from Realtime DB:', error);
          loadSampleBanners();
        });
    }

    // NEW: Save order to Realtime Database
    async function saveOrderToRealtimeDB(orderData) {
      try {
        await realtimeDb.ref('orders/' + orderData.orderId).set({
          orderId: orderData.orderId,
          userId: orderData.userId,
          username: orderData.username,
          productName: orderData.productName,
          price: orderData.price,
          orderDate: orderData.orderDate,
          status: orderData.status
        });
        return true;
      } catch (error) {
        console.error('Error saving order to Realtime DB:', error);
        return false;
      }
    }

    // NEW: Load user orders from Realtime Database
    function loadUserOrdersFromRealtimeDB(userId) {
      realtimeDb.ref('orders').orderByChild('userId').equalTo(userId).once('value')
        .then(snapshot => {
          const ordersData = snapshot.val();
          const ordersList = document.getElementById('ordersList');
          const noOrders = document.getElementById('noOrders');
          
          if (!ordersData) {
            ordersList.style.display = 'none';
            noOrders.style.display = 'block';
            return;
          }
          
          ordersList.style.display = 'block';
          noOrders.style.display = 'none';
          ordersList.innerHTML = '';
          
          Object.keys(ordersData).forEach(orderId => {
            const order = ordersData[orderId];
            const orderCard = createOrderCard(order);
            ordersList.appendChild(orderCard);
          });
        })
        .catch(error => {
          console.error('Error loading orders from Realtime DB:', error);
        });
    }

    // Amazon/Flipkart Gallery Functions
    function fkInitGallery(product) {
      if (!product) return;

      // Clear existing gallery
      fkGalleryTrack.innerHTML = '';
      fkGalleryDots.innerHTML = '';
      fkGalleryThumbs.innerHTML = '';

      // Get images from product - Firebase path: /products/{productId}/images[]
      fkImages = product.images && product.images.length > 0 ? product.images : [product.image];

      // Create slides
      fkImages.forEach((image, index) => {
        // Main slide
        const slide = document.createElement('div');
        slide.className = 'fk-gallery-slide';
        slide.style.backgroundImage = `url('${image}')`;
        slide.addEventListener('click', () => fkOpenZoom(image));
        fkGalleryTrack.appendChild(slide);

        // Dot indicator
        const dot = document.createElement('div');
        dot.className = `fk-gallery-dot ${index === 0 ? 'active' : ''}`;
        dot.addEventListener('click', () => fkGoToSlide(index));
        fkGalleryDots.appendChild(dot);

        // Thumbnail
        const thumb = document.createElement('div');
        thumb.className = `fk-gallery-thumb ${index === 0 ? 'active' : ''}`;
        thumb.style.backgroundImage = `url('${image}')`;
        thumb.addEventListener('click', () => fkGoToSlide(index));
        fkGalleryThumbs.appendChild(thumb);
      });

      // Reset to first slide
      fkCurrentSlide = 0;
      fkUpdateGallery();
    }

    function fkUpdateGallery() {
      fkGalleryTrack.style.transform = `translateX(-${fkCurrentSlide * 100}%)`;
      
      // Update dots
      document.querySelectorAll('.fk-gallery-dot').forEach((dot, index) => {
        dot.classList.toggle('active', index === fkCurrentSlide);
      });
      
      // Update thumbnails
      document.querySelectorAll('.fk-gallery-thumb').forEach((thumb, index) => {
        thumb.classList.toggle('active', index === fkCurrentSlide);
      });
    }

    function fkPrevSlide() {
      if (fkCurrentSlide > 0) {
        fkCurrentSlide--;
        fkUpdateGallery();
      }
    }

    function fkNextSlide() {
      if (fkCurrentSlide < fkImages.length - 1) {
        fkCurrentSlide++;
        fkUpdateGallery();
      }
    }

    function fkGoToSlide(index) {
      fkCurrentSlide = index;
      fkUpdateGallery();
    }

    function fkOpenZoom(imageUrl) {
      fkZoomImage.src = imageUrl;
      fkZoomModal.classList.add('active');
    }

    // Touch swipe functionality
    function fkTouchStart(event) {
      fkIsDragging = true;
      fkStartPos = getPositionX(event);
      fkAnimationID = requestAnimationFrame(fkAnimation);
      fkGalleryTrack.style.cursor = 'grabbing';
    }

    function fkTouchMove(event) {
      if (fkIsDragging) {
        const currentPosition = getPositionX(event);
        fkCurrentTranslate = fkPrevTranslate + currentPosition - fkStartPos;
      }
    }

    function fkTouchEnd() {
      cancelAnimationFrame(fkAnimationID);
      fkIsDragging = false;
      const movedBy = fkCurrentTranslate - fkPrevTranslate;

      if (movedBy < -100 && fkCurrentSlide < fkImages.length - 1) {
        fkCurrentSlide += 1;
      }

      if (movedBy > 100 && fkCurrentSlide > 0) {
        fkCurrentSlide -= 1;
      }

      fkSetPositionByIndex();
      fkGalleryTrack.style.cursor = 'grab';
    }

    function fkAnimation() {
      fkGalleryTrack.style.transform = `translateX(${fkCurrentTranslate}px)`;
      if (fkIsDragging) requestAnimationFrame(fkAnimation);
    }

    function fkSetPositionByIndex() {
      fkCurrentTranslate = fkCurrentSlide * -fkGalleryMain.offsetWidth;
      fkPrevTranslate = fkCurrentTranslate;
      fkUpdateGallery();
    }

    function getPositionX(event) {
      return event.type.includes('mouse') ? event.pageX : event.touches[0].clientX;
    }

    // Sticky button handlers
    function fkHandleAddToCart() {
      if (!currentProduct) return;
      showToast('Product added to cart!', 'success');
      // Add your cart logic here
    }

    function fkHandleBuyNow() {
      if (!currentProduct) return;
      orderProductFromDetail();
    }

    // NEW: Improved Authentication Functions with Error Handling
    async function handleLogin() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      // Clear previous errors
      loginError.textContent = '';
      
      if (!email || !password) {
        loginError.textContent = 'Please fill in all fields';
        return;
      }
      
      try {
        loginBtn.disabled = true;
        loginBtn.innerHTML = '<div class="loading-spinner"></div> Logging in...';
        
        const userCredential = await auth.signInWithEmailAndPassword(email, password);
        showToast('Login successful!', 'success');
        authModal.classList.remove('active');
        
        // Clear form
        document.getElementById('loginEmail').value = '';
        document.getElementById('loginPassword').value = '';
      } catch (err) {
        console.error('Login error:', err);
        // Display error in the form, not as popup
        loginError.textContent = err.message;
      } finally {
        loginBtn.disabled = false;
        loginBtn.textContent = 'Login';
      }
    }

    async function handleSignup() {
      const name = document.getElementById('signupName').value;
      const email = document.getElementById('signupEmail').value;
      const password = document.getElementById('signupPassword').value;
      
      // Clear previous errors
      signupError.textContent = '';
      
      if (!name || !email || !password) {
        signupError.textContent = 'Please fill in all fields';
        return;
      }
      
      if (password.length < 6) {
        signupError.textContent = 'Password should be at least 6 characters';
        return;
      }
      
      try {
        signupBtn.disabled = true;
        signupBtn.innerHTML = '<div class="loading-spinner"></div> Creating account...';
        
        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
        const user = userCredential.user;
        
        // Save user profile
        await db.collection('users').doc(user.uid).set({
          name: name,
          email: email,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        
        showToast('Account created successfully!', 'success');
        authModal.classList.remove('active');
        
        // Clear form
        document.getElementById('signupName').value = '';
        document.getElementById('signupEmail').value = '';
        document.getElementById('signupPassword').value = '';
      } catch (err) {
        console.error('Signup error:', err);
        // Display error in the form, not as popup
        signupError.textContent = err.message;
      } finally {
        signupBtn.disabled = false;
        signupBtn.textContent = 'Sign Up';
      }
    }

    async function handleGoogleLogin() {
      const provider = new firebase.auth.GoogleAuthProvider();
      
      try {
        const result = await auth.signInWithPopup(provider);
        const user = result.user;
        
        // Check if user exists in Firestore
        const userDoc = await db.collection('users').doc(user.uid).get();
        
        if (!userDoc.exists) {
          // Create new user document
          await db.collection('users').doc(user.uid).set({
            name: user.displayName,
            email: user.email,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
          });
        }
        
        showToast('Login successful!', 'success');
        authModal.classList.remove('active');
      } catch (err) {
        console.error('Google login error:', err);
        // Display error in appropriate form
        if (loginForm.classList.contains('active')) {
          loginError.textContent = err.message;
        } else {
          signupError.textContent = err.message;
        }
      }
    }

    async function handleResetPassword() {
      const email = document.getElementById('forgotPasswordEmail').value;
      
      if (!email) {
        showToast('Please enter your email address', 'error');
        return;
      }
      
      try {
        resetPasswordBtn.disabled = true;
        resetPasswordBtn.innerHTML = '<div class="loading-spinner"></div> Sending...';
        
        await auth.sendPasswordResetEmail(email);
        showToast('Password reset email sent!', 'success');
        forgotPasswordForm.classList.remove('active');
        loginForm.classList.add('active');
        
        // Clear form
        document.getElementById('forgotPasswordEmail').value = '';
      } catch (err) {
        console.error('Password reset error:', err);
        showToast(err.message, 'error');
      } finally {
        resetPasswordBtn.disabled = false;
        resetPasswordBtn.textContent = 'Reset Password';
      }
    }

    // NEW: Improved Order Placement with Order ID
    async function confirmOrder() {
      if (!currentUser) {
        showLoginModal();
        return;
      }
      
      // Generate Order ID
      const orderId = generateOrderId();
      currentOrderId = orderId;
      
      const paymentMethod = document.querySelector('input[name="pay"]:checked').value;
      const quantity = parseInt(document.getElementById('qtySelect').value);
      const size = document.querySelector('.size-option.selected')?.getAttribute('data-value') || 'Not specified';
      
      const orderData = {
        orderId: orderId,
        userId: currentUser.uid,
        username: userInfo.fullName || 'Customer',
        productId: currentProduct.id,
        productName: currentProduct.name,
        price: parseFloat(currentProduct.price.replace('‚Çπ', '')) * quantity,
        quantity: quantity,
        size: size,
        paymentMethod: paymentMethod,
        status: 'confirmed',
        orderDate: Date.now(),
        userInfo: userInfo
      };
      
      try {
        // Save to Firestore
        await db.collection('orders').doc(orderId).set(orderData);
        
        // NEW: Also save to Realtime Database
        const realtimeSaved = await saveOrderToRealtimeDB(orderData);
        
        if (!realtimeSaved) {
          console.warn('Order saved to Firestore but not to Realtime Database');
        }
        
        // Update UI with order ID
        document.getElementById('orderIdDisplay').textContent = orderId;
        
        // Show success page
        showPage('successPage');
        
        // Send confirmation email
        sendOrderConfirmationEmail(orderData);
        
        // Clear user info for next order
        userInfo = {};
        
      } catch (error) {
        console.error('Error placing order:', error);
        showToast('Failed to place order. Please try again.', 'error');
      }
    }

    // Page navigation
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });
      document.getElementById(pageId).classList.add('active');
      
      // Update step pills based on current page
      updateStepPills();
      
      // Scroll to top
      window.scrollTo(0, 0);
      
      // Load specific data for certain pages
      if (pageId === 'myOrdersPage' && currentUser) {
        loadUserOrdersFromRealtimeDB(currentUser.uid);
      } else if (pageId === 'wishlistPage') {
        renderWishlist();
      } else if (pageId === 'accountPage' && currentUser) {
        loadAccountData();
      } else if (pageId === 'settingsPage' && currentUser) {
        loadSettings();
      } else if (pageId === 'addressPage' && currentUser) {
        loadAddresses();
      }
    }

    function checkAuthAndShowPage(pageId) {
      if (!currentUser) {
        showLoginModal();
        return;
      }
      showPage(pageId);
    }

    function showLoginModal() {
      authModal.classList.add('active');
      switchAuthTab('login');
    }

    function switchAuthTab(tab) {
      // Reset forms
      loginForm.classList.remove('active');
      signupForm.classList.remove('active');
      forgotPasswordForm.classList.remove('active');
      
      // Reset tabs
      loginTab.classList.remove('active');
      signupTab.classList.remove('active');
      
      // Clear errors
      loginError.textContent = '';
      signupError.textContent = '';
      
      if (tab === 'login') {
        loginTab.classList.add('active');
        loginForm.classList.add('active');
      } else {
        signupTab.classList.add('active');
        signupForm.classList.add('active');
      }
    }

    function logout() {
      auth.signOut().then(() => {
        showToast('Logged out successfully', 'success');
        showPage('homePage');
      }).catch(error => {
        console.error('Logout error:', error);
        showToast('Error logging out', 'error');
      });
    }

    // Mobile menu functions
    function openMenu() {
      mobileMenu.classList.add('active');
      menuOverlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeMenu() {
      mobileMenu.classList.remove('active');
      menuOverlay.classList.remove('active');
      document.body.style.overflow = '';
    }

    // Theme functions
    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      
      // Update toggle in settings if it exists
      const darkModeToggle = document.getElementById('darkModeToggle');
      if (darkModeToggle) {
        darkModeToggle.checked = newTheme === 'dark';
      }
    }

    // Toast notification
    function showToast(message, type = 'success') {
      toast.textContent = message;
      toast.className = 'toast ' + type;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // User interface updates
    function updateUIForUser(user) {
      userProfile.style.display = 'flex';
      openLoginTop.style.display = 'none';
      mobileLoginBtn.style.display = 'none';
      mobileUserProfile.style.display = 'flex';
      
      // Load user data to display
      db.collection('users').doc(user.uid).get().then(doc => {
        if (doc.exists) {
          const userData = doc.data();
          userName.textContent = userData.name || 'User';
          mobileUserName.textContent = userData.name || 'User';
          accountEmail.textContent = user.email;
          
          // Set avatar initial
          const initial = (userData.name || 'U').charAt(0).toUpperCase();
          userAvatar.textContent = initial;
        }
      });
    }

    function updateUIForGuest() {
      userProfile.style.display = 'none';
      openLoginTop.style.display = 'block';
      mobileLoginBtn.style.display = 'flex';
      mobileUserProfile.style.display = 'none';
      accountDropdown.classList.remove('active');
    }

    function toggleAccountDropdown() {
      accountDropdown.classList.toggle('active');
    }

    // Data loading functions
    function loadUserData(user) {
      db.collection('users').doc(user.uid).get().then(doc => {
        if (doc.exists) {
          const userData = doc.data();
          userInfo = { ...userInfo, ...userData };
        }
      }).catch(error => {
        console.error('Error loading user data:', error);
      });
    }

    function loadAccountData() {
      if (!currentUser) return;
      
      db.collection('users').doc(currentUser.uid).get().then(doc => {
        if (doc.exists) {
          const userData = doc.data();
          document.getElementById('accountPageName').textContent = userData.name || 'User';
          document.getElementById('accountPageEmail').textContent = currentUser.email;
          document.getElementById('accountPageAvatar').textContent = (userData.name || 'U').charAt(0).toUpperCase();
          document.getElementById('profileName').value = userData.name || '';
          document.getElementById('profileEmail').value = currentUser.email;
          document.getElementById('profilePhone').value = userData.phone || '';
        }
      });
    }

    async function loadWishlist(user) {
      try {
        const snapshot = await db.collection('wishlist').where('userId', '==', user.uid).get();
        wishlist = snapshot.docs.map(doc => doc.data().productId);
        
        updateWishlistButtons();
        
        // Render wishlist page if open
        if (document.getElementById('wishlistPage').classList.contains('active')) {
          renderWishlist();
        }
      } catch (error) {
        console.error('Error loading wishlist:', error);
      }
    }

    async function loadRecentlyViewed(user) {
      try {
        const snapshot = await db.collection('recentlyViewed').where('userId', '==', user.uid)
          .orderBy('viewedAt', 'desc')
          .limit(10)
          .get();
        
        recentlyViewed = snapshot.docs.map(doc => doc.data().productId);
        
        // Render recently viewed section if there are items
        if (recentlyViewed.length > 0) {
          renderRecentlyViewed();
        }
      } catch (error) {
        console.error('Error loading recently viewed:', error);
      }
    }

    // Product rendering functions
    function renderProducts(productsToRender, containerId) {
      const container = document.getElementById(containerId);
      if (!container) return;
      
      container.innerHTML = '';
      
      productsToRender.forEach(product => {
        const productCard = createProductCard(product);
        container.appendChild(productCard);
      });
    }

    function createProductCard(product) {
      const card = document.createElement('div');
      card.className = 'product-card';
      card.innerHTML = `
        <div class="product-card-image" style="background-image: url('${product.image}')">
          ${product.badge ? `<div class="product-card-badge">${product.badge}</div>` : ''}
          ${product.professional ? `<div class="professional-badge">PRO</div>` : ''}
        </div>
        <div class="product-card-body">
          <div class="product-card-title">${product.name}</div>
          <div class="product-card-rating">
            <div class="product-card-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
            <div class="product-card-review-count">(${product.reviews || '0'})</div>
          </div>
          <div class="product-card-price">
            <div class="product-card-current-price">${product.price}</div>
            ${product.originalPrice ? `<div class="product-card-original-price">${product.originalPrice}</div>` : ''}
          </div>
          <div class="product-card-actions">
            <button class="action-btn wishlist-btn ${wishlist.includes(product.id) ? 'active' : ''}" data-product-id="${product.id}">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="${wishlist.includes(product.id) ? 'currentColor' : 'none'}" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
            </button>
            <button class="action-btn share-btn" data-product-id="${product.id}">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="18" cy="5" r="3"></circle>
                <circle cx="6" cy="12" r="3"></circle>
                <circle cx="18" cy="19" r="3"></circle>
                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
              </svg>
            </button>
          </div>
        </div>
      `;
      
      // Add event listeners
      card.querySelector('.product-card-image').addEventListener('click', () => showProductDetail(product));
      card.querySelector('.wishlist-btn').addEventListener('click', (e) => {
        e.stopPropagation();
        toggleWishlist(product.id);
      });
      card.querySelector('.share-btn').addEventListener('click', (e) => {
        e.stopPropagation();
        shareProduct('default', product);
      });
      
      return card;
    }

    function renderProductSlider(productsToRender, containerId) {
      const container = document.getElementById(containerId);
      if (!container) return;
      
      container.innerHTML = '';
      
      productsToRender.forEach(product => {
        const sliderItem = document.createElement('div');
        sliderItem.className = 'slider-item';
        sliderItem.innerHTML = `
          <div class="slider-item-img" style="background-image: url('${product.image}')"></div>
          <div class="slider-item-body">
            <div class="slider-item-title">${product.name}</div>
            <div class="slider-item-price">${product.price}</div>
          </div>
        `;
        
        sliderItem.addEventListener('click', () => showProductDetail(product));
        container.appendChild(sliderItem);
      });
    }

    function renderCategories() {
      const container = document.getElementById('categoriesContainer');
      if (!container) return;
      
      container.innerHTML = '';
      
      categories.forEach(category => {
        const categoryPill = document.createElement('div');
        categoryPill.className = 'category-pill';
        categoryPill.textContent = category.name;
        categoryPill.addEventListener('click', () => filterByCategory(category.id));
        container.appendChild(categoryPill);
      });
    }

    function renderCategoryCircles() {
      const container = document.getElementById('categoryCirclesContainer');
      if (!container) return;
      
      container.innerHTML = '';
      
      categories.forEach(category => {
        const circle = document.createElement('div');
        circle.className = 'category-circle';
        circle.innerHTML = `
          <div class="category-circle-image" style="background-image: url('${category.image}')"></div>
          <div class="category-circle-name">${category.name}</div>
        `;
        
        circle.addEventListener('click', () => filterByCategory(category.id));
        container.appendChild(circle);
      });
    }

    function renderBannerCarousel() {
      const track = document.getElementById('bannerTrack');
      const controls = document.getElementById('bannerControls');
      
      if (!track || !controls) return;
      
      track.innerHTML = '';
      controls.innerHTML = '';
      
      banners.forEach((banner, index) => {
        const slide = document.createElement('div');
        slide.className = 'banner-slide';
        slide.style.backgroundImage = `url('${banner.image}')`;
        track.appendChild(slide);
        
        const dot = document.createElement('div');
        dot.className = `banner-dot ${index === 0 ? 'active' : ''}`;
        dot.addEventListener('click', () => setBannerSlide(index));
        controls.appendChild(dot);
      });
      
      // Auto-rotate banners
      setInterval(() => {
        const activeIndex = banners.findIndex((_, index) => 
          document.querySelector(`.banner-dot:nth-child(${index + 1})`).classList.contains('active')
        );
        const nextIndex = (activeIndex + 1) % banners.length;
        setBannerSlide(nextIndex);
      }, 5000);
    }

    function setBannerSlide(index) {
      const track = document.getElementById('bannerTrack');
      const dots = document.querySelectorAll('.banner-dot');
      
      if (!track || !dots.length) return;
      
      track.style.transform = `translateX(-${index * 100}%)`;
      
      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
      });
    }

    // Product detail functions
    function showProductDetail(product) {
      currentProduct = product;
      
      // Update product detail page
      document.getElementById('detailTitle').textContent = product.name;
      document.getElementById('detailPrice').textContent = product.price;
      document.getElementById('detailDesc').textContent = product.description || '';
      document.getElementById('detailFullDesc').textContent = product.fullDescription || product.description || 'No description available.';
      document.getElementById('detailSku').textContent = `SKU: ${product.sku || 'N/A'}`;
      document.getElementById('breadcrumbProductName').textContent = product.name;
      
      // Update stock status
      const stockStatus = document.getElementById('detailStockStatus');
      if (product.stock === 'in') {
        stockStatus.textContent = 'In Stock';
        stockStatus.className = 'stock-status in-stock';
      } else if (product.stock === 'low') {
        stockStatus.textContent = 'Low Stock';
        stockStatus.className = 'stock-status low-stock';
      } else {
        stockStatus.textContent = 'Out of Stock';
        stockStatus.className = 'stock-status out-of-stock';
      }
      
      // Initialize Amazon/Flipkart gallery
      fkInitGallery(product);
      
      // Update share link
      const shareLink = window.location.origin + window.location.pathname + '?product=' + product.id;
      document.getElementById('productShareLink').value = shareLink;
      
      // Update wishlist button
      const wishlistBtn = document.getElementById('detailWishlistBtn');
      if (wishlist.includes(product.id)) {
        wishlistBtn.textContent = 'Remove from Wishlist';
        wishlistBtn.classList.add('active');
      } else {
        wishlistBtn.textContent = 'Add to Wishlist';
        wishlistBtn.classList.remove('active');
      }
      
      // Load similar products
      loadSimilarProducts(product);
      
      // Add to recently viewed if user is logged in
      if (currentUser) {
        addToRecentlyViewed(product.id);
      }
      
      // Show product detail page
      showPage('productDetailPage');
    }

    function setDetailImage(imageUrl, index) {
      document.getElementById('detailMainImage').style.backgroundImage = `url('${imageUrl}')`;
      
      // Update active thumbnail
      document.querySelectorAll('.product-detail-thumbnail').forEach((thumb, i) => {
        thumb.classList.toggle('active', i === index);
      });
      
      currentImageIndex = index;
    }

    function loadSimilarProducts(product) {
      // For now, just show random products from the same category if available
      const similarProducts = products
        .filter(p => p.id !== product.id)
        .slice(0, 10);
      
      renderProductSlider(similarProducts, 'similarProductsSlider');
    }

    // Order flow functions
    function toUserInfo() {
      // Validate size selection
      const selectedSize = document.querySelector('.size-option.selected');
      if (!selectedSize) {
        document.getElementById('sizeValidationError').classList.add('show');
        return;
      }
      
      showPage('userPage');
    }

    function toPayment() {
      // Validate user info
      const fullname = document.getElementById('fullname').value;
      const mobile = document.getElementById('mobile').value;
      const pincode = document.getElementById('pincode').value;
      const city = document.getElementById('city').value;
      const state = document.getElementById('state').value;
      const house = document.getElementById('house').value;
      
      if (!fullname || !mobile || !pincode || !city || !state || !house) {
        showToast('Please fill in all required fields', 'error');
        return;
      }
      
      // Validate mobile number
      if (mobile.length !== 10 || isNaN(mobile)) {
        showToast('Please enter a valid 10-digit mobile number', 'error');
        return;
      }
      
      // Validate pincode
      if (pincode.length !== 6 || isNaN(pincode)) {
        showToast('Please enter a valid 6-digit pincode', 'error');
        return;
      }
      
      // Save user info
      userInfo = {
        fullName: fullname,
        mobile: mobile,
        pincode: pincode,
        city: city,
        state: state,
        house: house
      };
      
      // Update summary
      const quantity = parseInt(document.getElementById('qtySelect').value);
      const productPrice = parseFloat(currentProduct.price.replace('‚Çπ', '').replace(',', ''));
      const total = (productPrice * quantity) + 50; // Adding delivery charge
      
      document.getElementById('sumProduct').textContent = currentProduct.name;
      document.getElementById('sumQty').textContent = quantity;
      document.getElementById('sumPrice').textContent = `‚Çπ${productPrice * quantity}`;
      document.getElementById('sumTotal').textContent = `‚Çπ${total}`;
      
      showPage('paymentPage');
    }

    // Wishlist functions
    async function toggleWishlist(productId) {
      if (!currentUser) {
        showLoginModal();
        return;
      }
      
      try {
        const wishlistRef = db.collection('wishlist').where('userId', '==', currentUser.uid).where('productId', '==', productId);
        const snapshot = await wishlistRef.get();
        
        if (snapshot.empty) {
          // Add to wishlist
          await db.collection('wishlist').add({
            userId: currentUser.uid,
            productId: productId,
            addedAt: firebase.firestore.FieldValue.serverTimestamp()
          });
          
          wishlist.push(productId);
          showToast('Added to wishlist', 'success');
        } else {
          // Remove from wishlist
          await snapshot.docs[0].ref.delete();
          
          wishlist = wishlist.filter(id => id !== productId);
          showToast('Removed from wishlist', 'success');
        }
        
        updateWishlistButtons();
        
        // Update detail page if open
        if (document.getElementById('productDetailPage').classList.contains('active') && 
            currentProduct && currentProduct.id === productId) {
          const wishlistBtn = document.getElementById('detailWishlistBtn');
          if (wishlist.includes(productId)) {
            wishlistBtn.textContent = 'Remove from Wishlist';
            wishlistBtn.classList.add('active');
          } else {
            wishlistBtn.textContent = 'Add to Wishlist';
            wishlistBtn.classList.remove('active');
          }
        }
        
        // Update wishlist page if open
        if (document.getElementById('wishlistPage').classList.contains('active')) {
          renderWishlist();
        }
      } catch (error) {
        console.error('Error updating wishlist:', error);
        showToast('Failed to update wishlist', 'error');
      }
    }

    function toggleWishlistFromDetail() {
      if (!currentProduct) return;
      toggleWishlist(currentProduct.id);
    }

    function updateWishlistButtons() {
      document.querySelectorAll('.wishlist-btn').forEach(btn => {
        const productId = btn.getAttribute('data-product-id');
        if (wishlist.includes(productId)) {
          btn.classList.add('active');
          btn.querySelector('svg').setAttribute('fill', 'currentColor');
        } else {
          btn.classList.remove('active');
          btn.querySelector('svg').setAttribute('fill', 'none');
        }
      });
    }

    function renderWishlist() {
      const container = document.getElementById('wishlistItems');
      const empty = document.getElementById('emptyWishlist');
      
      if (!container || !empty) return;
      
      const wishlistProducts = products.filter(product => wishlist.includes(product.id));
      
      if (wishlistProducts.length === 0) {
        container.style.display = 'none';
        empty.style.display = 'block';
        return;
      }
      
      container.style.display = 'block';
      empty.style.display = 'none';
      container.innerHTML = '';
      
      wishlistProducts.forEach(product => {
        const productCard = createProductCard(product);
        container.appendChild(productCard);
      });
    }

    // Recently viewed functions
    async function addToRecentlyViewed(productId) {
      if (!currentUser) return;
      
      try {
        // Check if already in recently viewed
        const existingRef = db.collection('recentlyViewed')
          .where('userId', '==', currentUser.uid)
          .where('productId', '==', productId);
        
        const snapshot = await existingRef.get();
        
        if (!snapshot.empty) {
          // Update timestamp
          await snapshot.docs[0].ref.update({
            viewedAt: firebase.firestore.FieldValue.serverTimestamp()
          });
        } else {
          // Add new entry
          await db.collection('recentlyViewed').add({
            userId: currentUser.uid,
            productId: productId,
            viewedAt: firebase.firestore.FieldValue.serverTimestamp()
          });
        }
        
        // Reload recently viewed
        loadRecentlyViewed(currentUser);
      } catch (error) {
        console.error('Error adding to recently viewed:', error);
      }
    }

    function renderRecentlyViewed() {
      const section = document.getElementById('recentlyViewedSection');
      const slider = document.getElementById('recentlyViewedSlider');
      
      if (!section || !slider) return;
      
      const recentlyViewedProducts = products.filter(product => 
        recentlyViewed.includes(product.id)
      ).slice(0, 10);
      
      if (recentlyViewedProducts.length === 0) {
        section.style.display = 'none';
        return;
      }
      
      section.style.display = 'block';
      renderProductSlider(recentlyViewedProducts, 'recentlyViewedSlider');
    }

    // Search functions
    function handleSearch() {
      const query = document.getElementById('searchInput').value.toLowerCase();
      filterProducts(query, 'productGrid');
    }

    function handleHomeSearch() {
      const query = document.getElementById('homeSearchInput').value.toLowerCase();
      const resultsContainer = document.getElementById('homeSearchResults');
      
      if (query.length === 0) {
        resultsContainer.style.display = 'none';
        document.getElementById('homeProductGrid').style.display = 'grid';
        return;
      }
      
      const filteredProducts = products.filter(product => 
        product.name.toLowerCase().includes(query) ||
        (product.description && product.description.toLowerCase().includes(query))
      );
      
      if (filteredProducts.length === 0) {
        resultsContainer.innerHTML = '<div class="card-panel center">No products found</div>';
      } else {
        renderProducts(filteredProducts, 'homeSearchResults');
      }
      
      resultsContainer.style.display = 'grid';
      document.getElementById('homeProductGrid').style.display = 'none';
    }

    function filterProducts(query, containerId) {
      const filteredProducts = query ? 
        products.filter(product => 
          product.name.toLowerCase().includes(query) ||
          (product.description && product.description.toLowerCase().includes(query))
        ) : 
        products;
      
      renderProducts(filteredProducts, containerId);
    }

    function filterByCategory(categoryId) {
      const filteredProducts = products.filter(product => 
        product.category === categoryId
      );
      
      renderProducts(filteredProducts, 'productGrid');
      
      // Update active category pill
      document.querySelectorAll('.category-pill').forEach(pill => {
        pill.classList.remove('active');
      });
      
      document.querySelectorAll('.category-pill').forEach(pill => {
        if (pill.textContent === categories.find(c => c.id === categoryId)?.name) {
          pill.classList.add('active');
        }
      });
    }

    // Price filter functions
    function applyPriceFilter() {
      const minPrice = parseFloat(document.getElementById('minPrice').value) || 0;
      const maxPrice = parseFloat(document.getElementById('maxPrice').value) || 5000;
      
      const filteredProducts = products.filter(product => {
        const price = parseFloat(product.price.replace('‚Çπ', '').replace(',', ''));
        return price >= minPrice && price <= maxPrice;
      });
      
      renderProducts(filteredProducts, 'productGrid');
    }

    function resetPriceFilter() {
      document.getElementById('minPrice').value = '';
      document.getElementById('maxPrice').value = '';
      document.getElementById('minPriceSlider').value = 0;
      document.getElementById('maxPriceSlider').value = 5000;
      document.getElementById('minPriceValue').textContent = '‚Çπ0';
      document.getElementById('maxPriceValue').textContent = '‚Çπ5000';
      
      renderProducts(products, 'productGrid');
    }

    // Quantity functions
    function decreaseQuantity() {
      const qtyInput = document.getElementById('qtySelect');
      let value = parseInt(qtyInput.value);
      if (value > 1) {
        qtyInput.value = value - 1;
      }
    }

    function increaseQuantity() {
      const qtyInput = document.getElementById('qtySelect');
      let value = parseInt(qtyInput.value);
      if (value < 10) {
        qtyInput.value = value + 1;
      }
    }

    // Order from product detail
    function orderProductFromDetail() {
      if (!currentProduct) return;
      
      // Set current product for order flow
      currentProduct = currentProduct;
      
      // Update order page
      document.getElementById('spTitle').textContent = currentProduct.name;
      document.getElementById('spPrice').textContent = currentProduct.price;
      document.getElementById('spDesc').textContent = currentProduct.description || '';
      document.getElementById('spFullDesc').textContent = currentProduct.fullDescription || currentProduct.description || '';
      
      // Update gallery
      const galleryMain = document.getElementById('galleryMain');
      galleryMain.style.backgroundImage = `url('${currentProduct.image}')`;
      
      // Show order page
      showPage('orderPage');
    }

    // Sharing functions
    function shareProduct(platform, product = null) {
      const shareProduct = product || currentProduct;
      if (!shareProduct) return;
      
      const shareUrl = window.location.origin + window.location.pathname + '?product=' + shareProduct.id;
      const shareText = `Check out ${shareProduct.name} on Buyzo Cart - ${shareProduct.price}`;
      
      let shareLink = '';
      
      switch (platform) {
        case 'facebook':
          shareLink = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}`;
          break;
        case 'twitter':
          shareLink = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;
          break;
        case 'whatsapp':
          shareLink = `https://wa.me/?text=${encodeURIComponent(shareText + ' ' + shareUrl)}`;
          break;
        default:
          // Fallback to Web Share API if available
          if (navigator.share) {
            navigator.share({
              title: shareProduct.name,
              text: shareText,
              url: shareUrl
            });
            return;
          }
          break;
      }
      
      if (shareLink) {
        window.open(shareLink, '_blank');
      }
    }

    function copyShareLink() {
      const shareLink = document.getElementById('productShareLink');
      shareLink.select();
      document.execCommand('copy');
      showToast('Link copied to clipboard', 'success');
    }

    // Image zoom functions
    function openImageZoom() {
      if (!currentProduct) return;
      
      const imageUrl = currentProduct.images && currentProduct.images[currentImageIndex] ? 
        currentProduct.images[currentImageIndex] : currentProduct.image;
      
      zoomImage.src = imageUrl;
      zoomModal.classList.add('active');
      resetZoom();
    }

    function adjustZoom(delta) {
      currentZoomLevel += delta;
      currentZoomLevel = Math.max(0.5, Math.min(3, currentZoomLevel));
      zoomImage.style.transform = `scale(${currentZoomLevel})`;
    }

    function resetZoom() {
      currentZoomLevel = 1;
      zoomImage.style.transform = 'scale(1)';
    }

    // Newsletter subscription
    function handleNewsletterSubscription() {
      const email = document.getElementById('newsletterEmail').value;
      
      if (!email) {
        showToast('Please enter your email address', 'error');
        return;
      }
      
      // In a real app, you would save this to your database
      showToast('Thank you for subscribing!', 'success');
      document.getElementById('newsletterEmail').value = '';
    }

    // Account functions
    function saveProfile() {
      const name = document.getElementById('profileName').value;
      const phone = document.getElementById('profilePhone').value;
      
      if (!currentUser) return;
      
      db.collection('users').doc(currentUser.uid).update({
        name: name,
        phone: phone,
        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        showToast('Profile updated successfully', 'success');
        // Update UI
        userName.textContent = name;
        mobileUserName.textContent = name;
        userAvatar.textContent = name.charAt(0).toUpperCase();
        document.getElementById('accountPageName').textContent = name;
        document.getElementById('accountPageAvatar').textContent = name.charAt(0).toUpperCase();
      }).catch(error => {
        console.error('Error updating profile:', error);
        showToast('Failed to update profile', 'error');
      });
    }

    function changePassword() {
      // In a real app, you would show a modal to change password
      showToast('Password change feature coming soon', 'info');
    }

    function deleteAccount() {
      if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
        // In a real app, you would delete the user account
        showToast('Account deletion feature coming soon', 'info');
      }
    }

    function loadSettings() {
      if (!currentUser) return;
      
      db.collection('users').doc(currentUser.uid).get().then(doc => {
        if (doc.exists) {
          const userData = doc.data();
          const settings = userData.settings || {};
          
          // Set toggle values
          document.getElementById('emailNotifications').checked = settings.emailNotifications !== false;
          document.getElementById('smsNotifications').checked = settings.smsNotifications !== false;
          document.getElementById('pushNotifications').checked = settings.pushNotifications !== false;
          document.getElementById('personalizedRecs').checked = settings.personalizedRecs !== false;
          document.getElementById('dataSharing').checked = settings.dataSharing !== false;
          document.getElementById('darkModeToggle').checked = document.documentElement.getAttribute('data-theme') === 'dark';
          
          // Set select values
          if (settings.language) {
            document.getElementById('languageSelect').value = settings.language;
          }
          if (settings.currency) {
            document.getElementById('currencySelect').value = settings.currency;
          }
        }
      });
    }

    function saveSettings() {
      const emailNotifications = document.getElementById('emailNotifications').checked;
      const smsNotifications = document.getElementById('smsNotifications').checked;
      const pushNotifications = document.getElementById('pushNotifications').checked;
      const personalizedRecs = document.getElementById('personalizedRecs').checked;
      const dataSharing = document.getElementById('dataSharing').checked;
      const language = document.getElementById('languageSelect').value;
      const currency = document.getElementById('currencySelect').value;
      
      if (!currentUser) return;
      
      db.collection('users').doc(currentUser.uid).update({
        settings: {
          emailNotifications,
          smsNotifications,
          pushNotifications,
          personalizedRecs,
          dataSharing,
          language,
          currency
        },
        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        showToast('Settings saved successfully', 'success');
        
        // Apply language change if needed
        if (language === 'hi') {
          // Simple Hindi translation for demo
          document.querySelectorAll('h1, h2, h3, p, span, button, label, a').forEach(element => {
            if (element.textContent.includes('Home')) element.textContent = element.textContent.replace('Home', '‡§π‡•ã‡§Æ');
            if (element.textContent.includes('Products')) element.textContent = element.textContent.replace('Products', '‡§â‡§§‡•ç‡§™‡§æ‡§¶');
            if (element.textContent.includes('My Orders')) element.textContent = element.textContent.replace('My Orders', '‡§Æ‡•á‡§∞‡•á ‡§ë‡§∞‡•ç‡§°‡§∞');
            if (element.textContent.includes('Wishlist')) element.textContent = element.textContent.replace('Wishlist', '‡§µ‡§ø‡§∂‡§≤‡§ø‡§∏‡•ç‡§ü');
            if (element.textContent.includes('Login')) element.textContent = element.textContent.replace('Login', '‡§≤‡•â‡§ó‡§ø‡§®');
            if (element.textContent.includes('Sign Up')) element.textContent = element.textContent.replace('Sign Up', '‡§∏‡§æ‡§á‡§® ‡§Ö‡§™');
            if (element.textContent.includes('Add to Wishlist')) element.textContent = element.textContent.replace('Add to Wishlist', '‡§µ‡§ø‡§∂‡§≤‡§ø‡§∏‡•ç‡§ü ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡•á‡§Ç');
            if (element.textContent.includes('Remove from Wishlist')) element.textContent = element.textContent.replace('Remove from Wishlist', '‡§µ‡§ø‡§∂‡§≤‡§ø‡§∏‡•ç‡§ü ‡§∏‡•á ‡§π‡§ü‡§æ‡§è‡§Ç');
          });
        }
      }).catch(error => {
        console.error('Error saving settings:', error);
        showToast('Failed to save settings', 'error');
      });
    }

    // Address functions
    function showNewAddressForm() {
      document.getElementById('newAddressForm').style.display = 'block';
    }

    function hideNewAddressForm() {
      document.getElementById('newAddressForm').style.display = 'none';
    }

    function saveAddress() {
      const name = document.getElementById('addressName').value;
      const mobile = document.getElementById('addressMobile').value;
      const pincode = document.getElementById('addressPincode').value;
      const city = document.getElementById('addressCity').value;
      const state = document.getElementById('addressState').value;
      const type = document.getElementById('addressType').value;
      const street = document.getElementById('addressStreet').value;
      
      if (!name || !mobile || !pincode || !city || !state || !street) {
        showToast('Please fill in all required fields', 'error');
        return;
      }
      
      if (!currentUser) return;
      
      db.collection('addresses').add({
        userId: currentUser.uid,
        name: name,
        mobile: mobile,
        pincode: pincode,
        city: city,
        state: state,
        type: type,
        street: street,
        isDefault: false, // You might want to implement logic for default address
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        showToast('Address saved successfully', 'success');
        hideNewAddressForm();
        loadAddresses();
      }).catch(error => {
        console.error('Error saving address:', error);
        showToast('Failed to save address', 'error');
      });
    }

    function loadAddresses() {
      if (!currentUser) return;
      
      db.collection('addresses')
        .where('userId', '==', currentUser.uid)
        .orderBy('createdAt', 'desc')
        .get()
        .then(snapshot => {
          const container = document.getElementById('savedAddresses');
          container.innerHTML = '';
          
          if (snapshot.empty) {
            container.innerHTML = '<p style="color:var(--muted);text-align:center">No addresses saved yet</p>';
            return;
          }
          
          snapshot.docs.forEach(doc => {
            const address = doc.data();
            const addressCard = document.createElement('div');
            addressCard.className = 'address-card';
            addressCard.innerHTML = `
              <div style="font-weight:600">${address.name}</div>
              <div>${address.street}</div>
              <div>${address.city}, ${address.state} - ${address.pincode}</div>
              <div>Mobile: ${address.mobile}</div>
              <div class="address-actions">
                <button class="btn secondary edit-address" data-id="${doc.id}">Edit</button>
                <button class="btn secondary delete-address" data-id="${doc.id}">Delete</button>
              </div>
            `;
            container.appendChild(addressCard);
          });
        })
        .catch(error => {
          console.error('Error loading addresses:', error);
        });
    }

    // Step pills update
    function updateStepPills() {
      const currentPage = document.querySelector('.page.active').id;
      
      document.querySelectorAll('.step-pill').forEach(pill => {
        pill.classList.remove('disabled');
      });
      
      switch (currentPage) {
        case 'homePage':
        case 'productsPage':
          document.getElementById('pill-order').classList.add('disabled');
          document.getElementById('pill-user').classList.add('disabled');
          document.getElementById('pill-pay').classList.add('disabled');
          break;
        case 'orderPage':
          document.getElementById('pill-user').classList.add('disabled');
          document.getElementById('pill-pay').classList.add('disabled');
          break;
        case 'userPage':
          document.getElementById('pill-pay').classList.add('disabled');
          break;
      }
    }

    // Hero messages rotation
    function setupHeroMessages() {
      const messages = document.querySelectorAll('#heroMessages span');
      let currentIndex = 0;
      
      setInterval(() => {
        messages.forEach(msg => msg.classList.remove('active'));
        currentIndex = (currentIndex + 1) % messages.length;
        messages[currentIndex].classList.add('active');
      }, 3000);
    }

    // Email sending function
    function sendOrderConfirmationEmail(orderData) {
      // This would use EmailJS or your email service in a real app
      console.log('Order confirmation email would be sent for:', orderData);
    }

    // Sample data fallbacks
    function loadSampleProducts() {
      products = [
        {
          id: '1',
          name: 'Wireless Bluetooth Earbuds',
          price: '‚Çπ1,299',
          originalPrice: '‚Çπ2,499',
          image: 'https://images.unsplash.com/photo-1590658165737-15a047b8b5e3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8ZWFyYnVkc3xlbnwwfHwwfHx8MA%3D%3D&w=1000&q=80',
          description: 'High-quality wireless earbuds with noise cancellation',
          badge: '30% OFF',
          stock: 'in',
          sku: 'EAR-001'
        },
        {
          id: '2',
          name: 'Smart Watch Fitness Tracker',
          price: '‚Çπ2,499',
          originalPrice: '‚Çπ4,999',
          image: 'https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D&w=1000&q=80',
          description: 'Track your fitness with this advanced smartwatch',
          badge: '50% OFF',
          stock: 'in',
          sku: 'WAT-001'
        },
        {
          id: '3',
          name: 'Wireless Gaming Mouse',
          price: '‚Çπ1,599',
          image: 'https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Z2FtaW5nJTIwbW91c2V8ZW58MHx8MHx8fDA%3D&w=1000&q=80',
          description: 'Precision gaming mouse with RGB lighting',
          stock: 'low',
          sku: 'MOU-001'
        },
        {
          id: '4',
          name: 'Mechanical Keyboard',
          price: '‚Çπ3,299',
          originalPrice: '‚Çπ4,999',
          image: 'https://images.unsplash.com/photo-1541140532154-b024d705b90a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8a2V5Ym9hcmR8ZW58MHx8MHx8fDA%3D&w=1000&q=80',
          description: 'RGB mechanical keyboard with blue switches',
          badge: '34% OFF',
          stock: 'in',
          sku: 'KEY-001'
        }
      ];
      
      renderProducts(products, 'homeProductGrid');
      renderProducts(products, 'productGrid');
      renderProductSlider(products.slice(0, 10), 'productSlider');
    }

    function loadSampleCategories() {
      categories = [
        {
          id: '1',
          name: 'Electronics',
          image: 'https://images.unsplash.com/photo-1498049794561-7780e7231661?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8ZWxlY3Ryb25pY3N8ZW58MHx8MHx8fDA%3D&w=1000&q=80'
        },
        {
          id: '2',
          name: 'Fashion',
          image: 'https://images.unsplash.com/photo-1445205170230-053b83016050?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8ZmFzaGlvbnxlbnwwfHwwfHx8MA%3D%3D&w=1000&q=80'
        },
        {
          id: '3',
          name: 'Home & Kitchen',
          image: 'https://images.unsplash.com/photo-1556228453-efd6c1ff04f6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fGhvbWUlMjBraXRjaGVufGVufDB8fDB8fHww&w=1000&q=80'
        },
        {
          id: '4',
          name: 'Beauty',
          image: 'https://images.unsplash.com/photo-1596462502278-27bfdc403348?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YmVhdXR5fGVufDB8fDB8fHww&w=1000&q=80'
        }
      ];
      
      renderCategories();
      renderCategoryCircles();
    }

    function loadSampleBanners() {
      banners = [
        {
          id: '1',
          image: 'https://images.unsplash.com/photo-1607082350899-7e105aa886ae?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c2hvcHBpbmclMjBiYW5uZXJ8ZW58MHx8MHx8fDA%3D&w=1000&q=80'
        },
        {
          id: '2',
          image: 'https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8c2hvcHBpbmclMjBiYW5uZXJ8ZW58MHx8MHx8fDA%3D&w=1000&q=80'
        },
        {
          id: '3',
          image: 'https://images.unsplash.com/photo-1556742044-3c52d6e88c62?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8c2hvcHBpbmclMjBiYW5uZXJ8ZW58MHx8MHx8fDA%3D&w=1000&q=80'
        }
      ];
      
      renderBannerCarousel();
    }

    // Order card creation
    function createOrderCard(order) {
      const orderCard = document.createElement('div');
      orderCard.className = 'order-card';
      orderCard.innerHTML = `
        <div class="order-header">
          <div>
            <div class="order-id">${order.orderId}</div>
            <div class="order-date">${new Date(order.orderDate).toLocaleDateString()}</div>
          </div>
          <div class="order-status status-confirmed">${order.status}</div>
        </div>
        <div class="order-details">
          <div class="order-product-image" style="background-image: url('${currentProduct ? currentProduct.image : ''}')"></div>
          <div class="order-product-info">
            <div class="order-product-title">${order.productName}</div>
            <div class="order-product-price">${order.price}</div>
            <div class="order-product-meta">Qty: ${order.quantity} | Size: ${order.size}</div>
          </div>
        </div>
      `;
      
      orderCard.addEventListener('click', () => {
        showOrderDetail(order);
      });
      
      return orderCard;
    }

    function showOrderDetail(order) {
      const orderDetailContent = document.getElementById('orderDetailContent');
      orderDetailContent.innerHTML = `
        <div class="order-detail-section">
          <div class="order-detail-label">Order ID</div>
          <div class="order-detail-value">${order.orderId}</div>
        </div>
        <div class="order-detail-section">
          <div class="order-detail-label">Order Date</div>
          <div class="order-detail-value">${new Date(order.orderDate).toLocaleDateString()}</div>
        </div>
        <div class="order-detail-section">
          <div class="order-detail-label">Status</div>
          <div class="order-detail-value">
            <span class="order-status status-confirmed">${order.status}</span>
          </div>
        </div>
        <div class="order-detail-section">
          <div class="order-detail-label">Product</div>
          <div class="order-detail-product">
            <div class="order-detail-image" style="background-image: url('${currentProduct ? currentProduct.image : ''}')"></div>
            <div class="order-detail-product-info">
              <div class="order-detail-value">${order.productName}</div>
              <div class="order-detail-label">Quantity: ${order.quantity} | Size: ${order.size}</div>
              <div class="order-detail-value">${order.price}</div>
            </div>
          </div>
        </div>
        <div class="order-detail-section">
          <div class="order-detail-label">Delivery Address</div>
          <div class="order-detail-value">
            ${order.userInfo ? `
              ${order.userInfo.fullName}<br>
              ${order.userInfo.house}<br>
              ${order.userInfo.city}, ${order.userInfo.state} - ${order.userInfo.pincode}<br>
              Mobile: ${order.userInfo.mobile}
            ` : 'Address not available'}
          </div>
        </div>
        <div class="order-detail-section">
          <div class="order-detail-label">Payment Method</div>
          <div class="order-detail-value">${order.paymentMethod === 'cod' ? 'Cash on Delivery' : 'Prepaid (UPI/Card)'}</div>
        </div>
      `;
      
      showPage('orderDetailPage');
    }

    function showMyOrders() {
      if (currentUser) {
        loadUserOrdersFromRealtimeDB(currentUser.uid);
      }
    }
  </script>
</body>
</html>